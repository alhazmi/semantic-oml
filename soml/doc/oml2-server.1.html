<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.7" />
<title>oml2-server(1)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>oml2-server(1)</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph"><p>oml2-server - OML2 server daemon</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><strong>oml2-server</strong> [-D dir | --data-dir=dir] [-H hook | --event-hook=hook]
            [-l port | --listen=port] [--user=UID] [--group=GID]
            [-t idleto | --timeout=idleto]
            [-d loglevel | --debug-level=loglevel] [--logfile=file]
            [--usage] [--version | -v] [-? | --help]
            [OML-OPTIONS]</pre>
<div class="attribution">
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>oml2-server</strong> (OML2 Server) is the daemon program for OML.  It
collects measurements from client applications and stores them in a
measurement database.</p></div>
<div class="paragraph"><p><strong>oml2-server</strong> listens for connections from clients.  It is normally
started at boot as a system service.  Each client declares which
experiment it belongs to (using the --oml-exp-id option of the
linkoml:liboml2 client library), and then sends a stream of
measurement packets.  The measurements for each client are stored in
the experiment database belonging to the client&#8217;s experiment.</p></div>
<div class="paragraph"><p>If the client declares that it belongs to experiment <em>A</em>, then
<strong>oml2-server</strong> will look for an existing experiment database named <em>A</em>
and add measurement data to that database. Otherwise it will attempt
to create a new database of that name, initialize it for use, and
append new measurements to it.  Measurement streams from subsequent
clients for experiment <em>A</em> will also be appended to the new database.</p></div>
<div class="paragraph"><p>Finally, runtime statistics about the server can be reported over OML,
either to the server itself or, better, to another <strong>oml2-server</strong>. The
available measurements points are described below, in section
<a href="#_runtime_measurement_points">RUNTIME MEASUREMENT POINTS</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_options">OPTIONS</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
-D directory, --data-dir=directory
</dt>
<dd>
<p>
        Store SQLite3 measurement databases for all experiments in the
        specified directory, when the SQLite3 backend is selected. The
        default on this system is /usr/local/var/oml2.  <strong>--data-dir</strong>
        overrides the <strong>OML_SQLITE_DIR</strong> environment variable.  If
        <strong>oml2-server</strong> is run with an effective user id that does not have
        the right to create files in the directory, the server will exit
        with an error message in its log file.  The SQLite3 database file
        name for an experiment is chosen by appending the suffix ".sq3" to
        the experiment name.
</p>
</dd>
<dt class="hdlist1">
-H hook
</dt>
<dt class="hdlist1">
--event-hook=hook
</dt>
<dd>
<p>
        Specify an external hook program to call on specific events.  This hook
        should take commands on <em>stdin</em>, and write reports on <em>stdout</em>. The
        hook&#8217;s <em>stderr</em> is the same as the <strong>oml2-server</strong>'s.  When first started,
        it should identify itself to the <strong>oml2-server</strong> by printing the following
        banner line.
</p>
<div class="literalblock">
<div class="content">
<pre><tt>OML HOOK READY</tt></pre>
</div></div>
<div class="paragraph"><p>It should then process its input in a loop, looking for the commands
described in the <a href="#_hook_commands">HOOK COMMANDS</a> section, below.
Apart from its banner, the <strong>oml2-server</strong> does not currently read
anything the hook program outputs on its <em>stdout</em>.</p></div>
<div class="paragraph"><p>A simple example hook, <strong>oml2-server-hook.sh</strong>, is available in
/usr/local/share/oml2, which pushes the SQL dump of a just-finished experiment to
IRODS.</p></div>
</dd>
<dt class="hdlist1">
-l port
</dt>
<dt class="hdlist1">
--listen=port
</dt>
<dd>
<p>
        Listen for measurement client connections on the given
        port. The default port is 3003.
</p>
</dd>
<dt class="hdlist1">
--user=UID, --group=GID
</dt>
<dd>
<p>
        Try to change the server&#8217;s user id and group id before starting to
        serve clients.  OML only needs access to a single directory in
        which it has the right to create the SQLite3 experiment database
        files, plus the right to open and write to its log file (creating
        it if necessary).  The <strong>--user</strong> and <strong>--group</strong> options allow the
        system administrator to run <strong>oml2-server</strong> under a non-privileged
        account, thereby lessening its potential as a security risk.  If
        only <strong>--user</strong> is given, the gid will be set to the primary group id
        for the given user. <strong>--user</strong> and <strong>--group</strong> accept user and group
        names as arguments; numeric user and group ids are not supported.
</p>
</dd>
<dt class="hdlist1">
-d, --debug-level=level
</dt>
<dd>
<p>
        Set the verbosity of log output to level. The level should be
        an integer from 1 to 4 (1=ERROR, 2=WARNING, 3=INFO, 4=DEBUG).
        The default log verbosity is 3, INFO.
</p>
</dd>
<dt class="hdlist1">
-t idleto
</dt>
<dt class="hdlist1">
--timeout=idleto
</dt>
<dd>
<p>
        Set the time, in seconds, after which an idle (i.e., not
        receiving data) client socket is reaped. This is useful to
        preserve system resources in the case of long running
        experiments, intermittent reporting or faulty reporting nodes or
        network. Defaults to 60s.
</p>
</dd>
<dt class="hdlist1">
--logfile=file
</dt>
<dd>
<p>
        Output log messages to <em>file</em> rather than <em>stderr</em>.
</p>
</dd>
<dt class="hdlist1">
--logfile=file
</dt>
<dd>
<p>
                Write log messages to <em>file</em>.
</p>
</dd>
<dt class="hdlist1">
--usage
</dt>
<dd>
<p>
                Print a brief usage message.
</p>
</dd>
<dt class="hdlist1">
-v, --version
</dt>
<dd>
<p>
                Print the version number of <strong>oml2-server</strong>.
</p>
</dd>
<dt class="hdlist1">
-?, --help
</dt>
<dd>
<p>
                Print a summary of options.
</p>
</dd>
<dt class="hdlist1">
OML-OPTIONS
</dt>
<dd>
<p>
                These options control the reporting of runtime metrics
                over OML. They are documented in <a href="liboml2.1.html">liboml2(1)</a>.
                The avaialble <em>MPs</em> are documented in section
                <a href="#_runtime_measurement_points">RUNTIME MEASUREMENT POINTS</a>,
                below.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_runtime_measurement_points">RUNTIME MEASUREMENT POINTS</h2>
<div class="sectionbody">
<div class="paragraph"><p>The <strong>oml2-server</strong> is able to expose some internal parameters and events
over OML. While the server should be able to report these to itself, it
is recommended to use a second <strong>oml2-server</strong> for the purpose of
monitoring.</p></div>
<div class="paragraph"><p>Currently, the following <em>MPs</em> are available.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
clients
</dt>
<dd>
<p>
                This measurement point records client events, and
                reports their <em>address</em>, remote <em>port</em>, OML <em>node_id</em>,
                experimental <em>domain</em>, <em>appname</em>, as well as the
                observed <em>event</em> (e.g., connection or disconnection),
                and a potential <em>message</em>.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>An <a href="oml2-scaffold.3.html">oml2-scaffold(3)</a> application description listing these <em>MPs</em>
can also be found in /usr/local/share/oml2.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_hook_commands">HOOK COMMANDS</h2>
<div class="sectionbody">
<div class="paragraph"><p>The external event hook program should expect some of the following commands on
its standard input.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
EXIT
</dt>
<dd>
<p>
        Command the hook to cleanup and terminate. This command has no argument.
</p>
</dd>
<dt class="hdlist1">
DBCREATED <em>uri</em>
</dt>
<dd>
<p>
        New database <em>uri</em> (see <a href="#_database_uri_schemes">DATABASE URI SCHEMES</a>
        below) has been created ("New" here means that the database
        didn&#8217;t have a <em>start_time</em> metadatum; this is an idiosyncracy of
        the current code, but this essentially behaves as one would
        expect). Tasks such as giving permissions to specific user
        groups can be performed in response to this event.
</p>
</dd>
<dt class="hdlist1">
DBOPENED <em>uri</em>
</dt>
<dd>
<p>
        Database <em>uri</em> was re-opened.
</p>
</dd>
<dt class="hdlist1">
DBCLOSED <em>uri</em>
</dt>
<dd>
<p>
        The last client for database <em>uri</em> has now exited and cleanup
        tasks on the data can be performed.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_database_uri_schemes">DATABASE URI SCHEMES</h2>
<div class="sectionbody">
<div class="paragraph"><p>Database URI schemes vary with the backend, and are as follows.</p></div>
<div class="ulist"><ul>
<li>
<p>
SQLite3: <em>file:fullpath</em> where <em>fullpath</em> is the full path to the
        database in the <strong>oml2-server</strong>'s local filesystem.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_environment_variables">ENVIRONMENT VARIABLES</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
OML_SQLITE_DIR
</dt>
<dd>
<p>
Create SQLite3 experiment measurement databases in this directory.
This environment variable is overridden by the <strong>--data-dir</strong> command
line option.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_signals">SIGNALS</h2>
<div class="sectionbody">
<div class="paragraph"><p>The <strong>oml2-server</strong> reacts to some signals.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
SIGUSR
</dt>
<dd>
<p>
Log an information message reporting the status of its allocated memory
</p>
</dd>
<dt class="hdlist1">
SIGINT &amp; SIGTERM
</dt>
<dd>
<p>
Gracefully terminate, emptying the buffers and closing client connections.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_security_considerations">SECURITY CONSIDERATIONS</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>oml2-server</strong> does not use any authentication, and should thus be
considered insecure.  It is intended to be deployed behind firewalls
on a dedicated testbed network.  It should not be run as a daemon on
an open network.  Future versions of OML may be re-designed to be
suitable for use in insecure environments.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_bugs">BUGS</h2>
<div class="sectionbody">
<div class="paragraph"><p>If a problem you are experiencing is not addressed in the FAQ
(<a href="http://oml.mytestbed.net/projects/oml/wiki/FAQ_and_Support">http://oml.mytestbed.net/projects/oml/wiki/FAQ_and_Support</a>) nor already
present in the list of know bugs
(<a href="http://oml.mytestbed.net/projects/oml/issues">http://oml.mytestbed.net/projects/oml/issues</a>). You could discuss it on
the mailing list (details and archives at
<a href="http://oml.mytestbed.net/tab/show?id=oml">http://oml.mytestbed.net/tab/show?id=oml</a>).</p></div>
<div class="paragraph"><p>It is however advisable to open a ticket on our issue tracker at
<a href="http://oml.mytestbed.net/projects/oml/issues/new">http://oml.mytestbed.net/projects/oml/issues/new</a>. Don&#8217;t forget to
include details such as client and server logs (at <em>[--oml-log-level|-d]
2</em>). It also helps if you can share the source code of a (minimal, if
possible) example reliably triggering the problem.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_manual_pages">Manual Pages</h3>
<div class="paragraph"><p><a href="oml2-proxy-server.1.html">oml2-proxy-server(1)</a>, <a href="liboml2.1.html">liboml2(1)</a>, <a href="liboml2.3.html">liboml2(3)</a></p></div>
</div>
<div class="sect2">
<h3 id="_oml_user_manual">OML User Manual</h3>
<div class="paragraph"><p><a href="http://oml.mytestbed.net/projects/oml/wiki/Documentation">http://oml.mytestbed.net/projects/oml/wiki/Documentation</a></p></div>
</div>
<div class="sect2">
<h3 id="_sqlite3">SQLite3</h3>
<div class="paragraph"><p><a href="http://www.sqlite.org">http://www.sqlite.org</a></p></div>
</div>
<div class="sect2">
<h3 id="_irods">IRODS</h3>
<div class="paragraph"><p><a href="http://www.irods.org/">http://www.irods.org/</a></p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
OML 2.12.0pre.79-58cf-dirty<br />
Last updated 2015-04-16 15:28:57 CEST
</div>
<div id="footer-badges">
<a href="http://validator.w3.org/check?uri=referer">
  <img style="border:0;width:88px;height:31px"
    src="http://www.w3.org/Icons/valid-xhtml11-blue"
    alt="Valid XHTML 1.1" height="31" width="88" />
</a>
<a href="http://jigsaw.w3.org/css-validator/">
  <img style="border:0;width:88px;height:31px"
    src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
    alt="Valid CSS!" />
</a>
</div>
</div>
</body>
</html>
