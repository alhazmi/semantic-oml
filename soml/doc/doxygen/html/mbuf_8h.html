<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>oml2: mbuf.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="oml_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">oml2
   &#160;<span id="projectnumber">2.12.0pre.79-58cf-dirty</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mbuf_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mbuf.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;stdarg.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mbuf.h:</div>
<div class="dyncontent">
<div class="center"><img src="mbuf_8h__incl.png" border="0" usemap="#mbuf_8h" alt=""/></div>
<map name="mbuf_8h" id="mbuf_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="mbuf_8h__dep__incl.png" border="0" usemap="#mbuf_8hdep" alt=""/></div>
<map name="mbuf_8hdep" id="mbuf_8hdep">
<area shape="rect" id="node3" href="buffered__writer_8h.html" title="buffered_writer.h" alt="" coords="231,83,348,112"/><area shape="rect" id="node7" href="bin__writer_8c.html" title="An implementation of the OmlWriter interface functions (see oml2/oml_writer.h) that writes messages u..." alt="" coords="339,160,427,189"/><area shape="rect" id="node14" href="binary_8c.html" title="Functions for reading oml_message objects from an MBuffer using the OML binary format (OMSP Binary Ma..." alt="" coords="1016,160,1083,189"/><area shape="rect" id="node16" href="marshal_8h.html" title="marshal.h" alt="" coords="831,83,908,112"/><area shape="rect" id="node20" href="marshal_8c.html" title="Binary mode OMSP (OML Measurement Stream Protocol (OMSP) OMSP Binary Marshalling) marhsalling and unm..." alt="" coords="501,160,579,189"/><area shape="rect" id="node22" href="marshal2_8c.html" title="marshal2.c" alt="" coords="907,160,992,189"/><area shape="rect" id="node24" href="text_8c.html" title="Text mode OMSP (OML Measurement Stream Protocol (OMSP) OMSP Text Protocol) serialisation of OML tuple..." alt="" coords="1107,160,1160,189"/><area shape="rect" id="node26" href="client__handler_8c.html" title="The client handler receives callbacks from the eventloop and processes messages in either OML&#39;s text ..." alt="" coords="808,237,920,267"/><area shape="rect" id="node30" href="check__binary__protocol_8c.html" title="check_binary_protocol.c" alt="" coords="1192,237,1355,267"/><area shape="rect" id="node32" href="message_8h.html" title="Defines a container for either a text or binary message (struct oml_message) and the associated inter..." alt="" coords="1989,83,2075,112"/><area shape="rect" id="node35" href="binary_8h.html" title="binary.h" alt="" coords="1797,160,1864,189"/><area shape="rect" id="node37" href="receiver_8c.html" title="Functions responsible for implementing the receive loop that reads stores meessages in the message qu..." alt="" coords="1964,315,2041,344"/><area shape="rect" id="node44" href="text_8h.html" title="text.h" alt="" coords="1951,160,2004,189"/><area shape="rect" id="node53" href="proxy__client_8h.html" title="proxy_client.h" alt="" coords="2293,237,2395,267"/><area shape="rect" id="node57" href="proxy__client_8c.html" title="Functions to manage the Client structure." alt="" coords="2529,315,2631,344"/><area shape="rect" id="node73" href="mbuf_8c.html" title="Managed buffer (MBuffer) abstraction providing functions for reading, writing and memory resizing use..." alt="" coords="2483,83,2544,112"/><area shape="rect" id="node81" href="client__handler_8h.html" title="client_handler.h" alt="" coords="1419,83,1531,112"/><area shape="rect" id="node90" href="check__server_8c.html" title="check_server.c" alt="" coords="1552,237,1661,267"/><area shape="rect" id="node92" href="check__text__protocol_8c.html" title="check_text_protocol.c" alt="" coords="1379,237,1528,267"/><area shape="rect" id="node96" href="check__liboml2__mbuf_8c.html" title="check_liboml2_mbuf.c" alt="" coords="2568,83,2720,112"/><area shape="rect" id="node98" href="check__liboml2__writers_8c.html" title="check_liboml2_writers.c" alt="" coords="2744,83,2907,112"/><area shape="rect" id="node5" href="api_8c.html" title="Implement the user&#45;visible API of OML." alt="" coords="264,160,315,189"/><area shape="rect" id="node9" href="buffered__writer_8c.html" title="A non&#45;blocking, self&#45;draining FIFO queue using threads." alt="" coords="5,160,123,189"/><area shape="rect" id="node11" href="text__writer_8c.html" title="An implementation of the OmlWriter interface functions (see oml2/oml_writer.h) that serializes measur..." alt="" coords="147,160,240,189"/><area shape="rect" id="node28" href="check__libshared__marshal_8c.html" title="check_libshared_marshal.c" alt="" coords="653,160,832,189"/><area shape="rect" id="node48" href="message__queue_8c.html" title="Implement a FIFO message queue containing CBuffer objects." alt="" coords="2091,237,2219,267"/><area shape="rect" id="node50" href="message__queue_8h.html" title="message_queue.h" alt="" coords="2141,160,2269,189"/><area shape="rect" id="node40" href="check__libshared__headers_8c.html" title="check_libshared_headers.c" alt="" coords="1787,237,1965,267"/><area shape="rect" id="node55" href="oml2-proxy-server_8c.html" title="Implement the proxy server&#39;s top&#45;level main() and its supporting functions." alt="" coords="2273,315,2409,344"/><area shape="rect" id="node60" href="sender_8c.html" title="Implements half&#45;async sender which uses a background thread to send messages to the OML server..." alt="" coords="2433,315,2505,344"/><area shape="rect" id="node62" href="session_8c.html" title="Session management functions." alt="" coords="2065,315,2143,344"/><area shape="rect" id="node64" href="msgloop_8c.html" title="msgloop.c" alt="" coords="2167,315,2249,344"/><area shape="rect" id="node84" href="oml2-server_8c.html" title="Main oml2&#45;server functions." alt="" coords="1336,160,1437,189"/><area shape="rect" id="node87" href="check__server_8h.html" title="check_server.h" alt="" coords="1512,160,1621,189"/></map>
</div>
</div>
<p><a href="mbuf_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMBuffer.html">MBuffer</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a47e507af696d229d8cf44f419597fe41"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structMBuffer.html">MBuffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a47e507af696d229d8cf44f419597fe41">MBuffer</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a765ec3ef2a50e81e94bdbde95973e362"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a765ec3ef2a50e81e94bdbde95973e362">mbuf_create</a> (void)</td></tr>
<tr class="memitem:a520c13f0a7c6f3d91824650eec985e53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a520c13f0a7c6f3d91824650eec985e53">mbuf_create2</a> (size_t buffer_length, size_t min_resize)</td></tr>
<tr class="memitem:a15daddf2549ab368d5f307a1175c1df0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a15daddf2549ab368d5f307a1175c1df0">mbuf_destroy</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a9aeb314b9a5fd87a790a75bda56d47e4"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a9aeb314b9a5fd87a790a75bda56d47e4">mbuf_buffer</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a64f532f1d7946c6969320cc4313bc687"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a64f532f1d7946c6969320cc4313bc687">mbuf_message</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:ad1e104ade5f0bd7a063e5673349f64b6"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#ad1e104ade5f0bd7a063e5673349f64b6">mbuf_rdptr</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a1a89ee1145322e7235d13707c79edd77"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a1a89ee1145322e7235d13707c79edd77">mbuf_wrptr</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:ad77cb9e3d579e54318162f30c847b8f4"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#ad77cb9e3d579e54318162f30c847b8f4">mbuf_length</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a2089ca5ad8c93dc8ed74d35ce200cad1"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a2089ca5ad8c93dc8ed74d35ce200cad1">mbuf_remaining</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf) __attribute__((deprecated))</td></tr>
<tr class="memitem:acf28b4348adeea5087141f795c71bd7a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#acf28b4348adeea5087141f795c71bd7a">mbuf_rd_remaining</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a6bb8514a1a3dd56456f64fb05dc4b334"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a6bb8514a1a3dd56456f64fb05dc4b334">mbuf_wr_remaining</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a60f8a8accde8c37e996b594310c59a26"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a60f8a8accde8c37e996b594310c59a26">mbuf_fill</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a3d6c31ff377c7c04e348e2594031413e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a3d6c31ff377c7c04e348e2594031413e">mbuf_fill_excluding_msg</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:ad04587b7a099c466b3b514778ba29d4f"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#ad04587b7a099c466b3b514778ba29d4f">mbuf_read_offset</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:aca2b308379cb7bb52d20642811238a2c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#aca2b308379cb7bb52d20642811238a2c">mbuf_write_offset</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a6382054b006daff0ef5daf28e3c42a22"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a6382054b006daff0ef5daf28e3c42a22">mbuf_message_offset</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a1afcdf8eb3312a3006b1ed5cc8e8843e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a1afcdf8eb3312a3006b1ed5cc8e8843e">mbuf_message_length</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a3da005d3626ed935fcba222178675aec"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a3da005d3626ed935fcba222178675aec">mbuf_message_index</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a2ee5265b405f90d567f5291c636ed185"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a2ee5265b405f90d567f5291c636ed185">mbuf_resize</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, size_t new_length)</td></tr>
<tr class="memitem:a7adcc3b4987705ab7ccbdc73f7e57e1d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a7adcc3b4987705ab7ccbdc73f7e57e1d">mbuf_check_resize</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, size_t bytes)</td></tr>
<tr class="memitem:a0b154f7d6f90e0c1fae4dc360c28f8eb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a0b154f7d6f90e0c1fae4dc360c28f8eb">mbuf_begin_write</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:ac4ddd843a465364728d9b113cc2e63d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#ac4ddd843a465364728d9b113cc2e63d8">mbuf_reset_write</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:acb5cd36b259b0df7a3173259835dbba0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#acb5cd36b259b0df7a3173259835dbba0">mbuf_write</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, const uint8_t *buf, size_t len)</td></tr>
<tr class="memitem:a3ffba68322618884256b946ee526e7e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a3ffba68322618884256b946ee526e7e6">mbuf_print</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, const char *format,...)</td></tr>
<tr class="memitem:a15b039c1f8b9f4e0d5fdffdc5f554192"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a15b039c1f8b9f4e0d5fdffdc5f554192">mbuf_begin_read</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:abf9a6c655d77bfc4f8d0299ce65a08c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#abf9a6c655d77bfc4f8d0299ce65a08c1">mbuf_reset_read</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a7217f65b708944e4f3f5d2f45e436a99"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a7217f65b708944e4f3f5d2f45e436a99">mbuf_read</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, uint8_t *buf, size_t len)</td></tr>
<tr class="memitem:a906aa8bcabc6a81ad4a699bb021b959c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a906aa8bcabc6a81ad4a699bb021b959c">mbuf_read_skip</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, size_t len)</td></tr>
<tr class="memitem:a2b5ff5e389e38561d10aee1be2c511f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a2b5ff5e389e38561d10aee1be2c511f2">mbuf_read_byte</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:af91b0996c673a65b2a9c728011911989"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#af91b0996c673a65b2a9c728011911989">mbuf_find</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, uint8_t c)</td></tr>
<tr class="memitem:a366783ee90e476db40cd5788f7a39908"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a366783ee90e476db40cd5788f7a39908">mbuf_find_not</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, uint8_t c)</td></tr>
<tr class="memitem:a29740cb378aba1d1a0a2a654e6ed0052"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a29740cb378aba1d1a0a2a654e6ed0052">mbuf_consume_message</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a4d56431fe4b652c78c51e68b3d1abde4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a4d56431fe4b652c78c51e68b3d1abde4">mbuf_message_start_advance</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, size_t n)</td></tr>
<tr class="memitem:a88e6f090bbfc4005582dd69424611a41"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a88e6f090bbfc4005582dd69424611a41">mbuf_repack</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a6197418fb3ef89250ac51be751e7805c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a6197418fb3ef89250ac51be751e7805c">mbuf_repack_message</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:ae5a8aa8cdfed676885ffda0499810985"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#ae5a8aa8cdfed676885ffda0499810985">mbuf_repack_message2</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a395990abdadb69351e6f6aa284e8643a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a395990abdadb69351e6f6aa284e8643a">mbuf_clear</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf)</td></tr>
<tr class="memitem:a622a4e73090be907712dee27f8920829"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mbuf_8h.html#a622a4e73090be907712dee27f8920829">mbuf_clear2</a> (<a class="el" href="structMBuffer.html">MBuffer</a> *mbuf, int zeroBuffer)</td></tr>
</table>
<h2>Typedef Documentation</h2>
<a class="anchor" id="a47e507af696d229d8cf44f419597fe41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structMBuffer.html">MBuffer</a>  <a class="el" href="structMBuffer.html">MBuffer</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="a15b039c1f8b9f4e0d5fdffdc5f554192"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_begin_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare to read a message from an <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<p>Adjust the msgptr to the current rdptr.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mbuf_8h.html#a64f532f1d7946c6969320cc4313bc687">mbuf_message</a>, <a class="el" href="mbuf_8h.html#a1afcdf8eb3312a3006b1ed5cc8e8843e">mbuf_message_length</a>, <a class="el" href="mbuf_8h.html#a29740cb378aba1d1a0a2a654e6ed0052">mbuf_consume_message</a>, <a class="el" href="mbuf_8h.html#a6197418fb3ef89250ac51be751e7805c">mbuf_repack_message</a>, <a class="el" href="mbuf_8h.html#ae5a8aa8cdfed676885ffda0499810985">mbuf_repack_message2</a> </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00592">592</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, and <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>

<p>Referenced by <a class="el" href="binary_8c_source.html#l00104">bin_read_msg_start()</a>, <a class="el" href="check__liboml2__mbuf_8c_source.html#l00329">START_TEST()</a>, <a class="el" href="marshal_8c_source.html#l00951">unmarshal_init()</a>, and <a class="el" href="marshal_8c_source.html#l01062">unmarshal_values()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b154f7d6f90e0c1fae4dc360c28f8eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_begin_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare to write a new message to an <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<p>Adjust the msgptr to the current wrptr.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mbuf_8h.html#a64f532f1d7946c6969320cc4313bc687">mbuf_message</a>, <a class="el" href="mbuf_8h.html#a29740cb378aba1d1a0a2a654e6ed0052">mbuf_consume_message</a>, <a class="el" href="mbuf_8h.html#a6197418fb3ef89250ac51be751e7805c">mbuf_repack_message</a>, <a class="el" href="mbuf_8h.html#ae5a8aa8cdfed676885ffda0499810985">mbuf_repack_message2</a> </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00614">614</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="marshal_8c_source.html#l00450">marshal_init()</a>, and <a class="el" href="check__liboml2__mbuf_8c_source.html#l00357">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9aeb314b9a5fd87a790a75bda56d47e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* mbuf_buffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get an <a class="el" href="structMBuffer.html">MBuffer</a>'s storage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to mbuf's memory buffer </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00109">109</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>.</p>

<p>Referenced by <a class="el" href="check__binary__protocol_8c_source.html#l00093">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7adcc3b4987705ab7ccbdc73f7e57e1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_check_resize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resize an <a class="el" href="structMBuffer.html">MBuffer</a> if it cannot contain the specified amount of data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
    <tr><td class="paramname">bytes</td><td>amount of data which need to be stored into the <a class="el" href="structMBuffer.html">MBuffer</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, or -1 on error </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mbuf_8h.html#a2ee5265b405f90d567f5291c636ed185">mbuf_resize</a> </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00354">354</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00035">MBuffer::length</a>, <a class="el" href="mbuf_8c_source.html#l00303">mbuf_resize()</a>, <a class="el" href="mbuf_8h_source.html#l00051">MBuffer::min_resize</a>, and <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>.</p>

<p>Referenced by <a class="el" href="mbuf_8c_source.html#l00421">mbuf_print()</a>, and <a class="el" href="mbuf_8c_source.html#l00381">mbuf_write()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> &lt; bytes) {</div>
<div class="line">    <span class="keywordtype">size_t</span> inc = bytes - mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a>;</div>
<div class="line">    <span class="keywordtype">size_t</span> min_resize = mbuf-&gt;<a class="code" href="structMBuffer.html#a61ea70630a413fb9ed19ca899b7d3173">min_resize</a> &gt; 0 ? mbuf-&gt;<a class="code" href="structMBuffer.html#a61ea70630a413fb9ed19ca899b7d3173">min_resize</a> : mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a>;</div>
<div class="line">    inc = min_resize * (inc / min_resize + 1);</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="mbuf_8c.html#a2ee5265b405f90d567f5291c636ed185">mbuf_resize</a> (mbuf, mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a> + inc);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a395990abdadb69351e6f6aa284e8643a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_clear </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear the content of an <a class="el" href="structMBuffer.html">MBuffer</a> and zero it out.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mbuf_8h.html#a622a4e73090be907712dee27f8920829">mbuf_clear2</a> </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00634">634</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8c_source.html#l00648">mbuf_clear2()</a>.</p>

<p>Referenced by <a class="el" href="receiver_8c_source.html#l00145">proxy_message_loop()</a>, and <a class="el" href="check__binary__protocol_8c_source.html#l00093">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="mbuf_8c.html#a5d26af82fcdea242092194e39ecc0a4a">mbuf_clear2</a>(mbuf, 1);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a622a4e73090be907712dee27f8920829"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_clear2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>zero_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear the content of an <a class="el" href="structMBuffer.html">MBuffer</a> and optionaly zero it out.</p>
<p>Resets the read, write and message pointers to the base.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
    <tr><td class="paramname">zero_buffer</td><td>non-zero if the memory must be actively cleared </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00648">648</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>, <a class="el" href="mbuf_8h_source.html#l00035">MBuffer::length</a>, <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="mbuf_8c_source.html#l00634">mbuf_clear()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (zero_buffer) {</div>
<div class="line">    memset (mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>, 0, mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a>);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a> = 0;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> = 0;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a29740cb378aba1d1a0a2a654e6ed0052"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_consume_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advance to a new message.</p>
<p>This is syntactic sugar to be called when all of a message has been processed by the caller, to advance the message pointer to the current read pointer iff it is behind (i.e., not writing).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mbuf_8h.html#a15b039c1f8b9f4e0d5fdffdc5f554192">mbuf_begin_read</a> </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00731">731</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, and <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>

<p>Referenced by <a class="el" href="binary_8c_source.html#l00048">bin_find_sync()</a>, <a class="el" href="binary_8c_source.html#l00182">bin_read_msg_values()</a>, <a class="el" href="receiver_8c_source.html#l00145">proxy_message_loop()</a>, <a class="el" href="check__liboml2__mbuf_8c_source.html#l00454">START_TEST()</a>, and <a class="el" href="text_8c_source.html#l00198">text_read_msg_values()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Can&#39;t consume message if we&#39;re in the middle of writing it</span></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> &gt; mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>; <span class="comment">/* Not using mbuf_begin_read to avoid redundant calls to mbuf_check_invariant */</span></div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a765ec3ef2a50e81e94bdbde95973e362"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMBuffer.html">MBuffer</a>* mbuf_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an MBuf with the default parameters. </p>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the newly allocated <a class="el" href="structMBuffer.html">MBuffer</a> </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mbuf_8h.html#a520c13f0a7c6f3d91824650eec985e53">mbuf_create2</a>, <a class="el" href="mbuf_8c.html#afaf870b3cd0c265f7222b27871894a7c">DEF_BUF_SIZE</a>, <a class="el" href="mbuf_8c.html#adc5d29613b65d3b32fc5814b11c9c7d7">DEF_MIN_BUF_RESIZE</a> </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00043">43</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8c_source.html#l00021">DEF_BUF_SIZE</a>, <a class="el" href="mbuf_8c_source.html#l00022">DEF_MIN_BUF_RESIZE</a>, and <a class="el" href="mbuf_8c_source.html#l00058">mbuf_create2()</a>.</p>

<p>Referenced by <a class="el" href="buffered__writer_8c_source.html#l00108">bw_create()</a>, <a class="el" href="check__server_8c_source.html#l00046">check_server_prepare_client_handler()</a>, <a class="el" href="client__handler_8c_source.html#l00206">client_handler_new()</a>, <a class="el" href="proxy__client_8c_source.html#l00045">client_new()</a>, and <a class="el" href="check__binary__protocol_8c_source.html#l00073">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="mbuf_8c.html#a520c13f0a7c6f3d91824650eec985e53">mbuf_create2</a>(<a class="code" href="mbuf_8c.html#afaf870b3cd0c265f7222b27871894a7c">DEF_BUF_SIZE</a>, <a class="code" href="mbuf_8c.html#adc5d29613b65d3b32fc5814b11c9c7d7">DEF_MIN_BUF_RESIZE</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a520c13f0a7c6f3d91824650eec985e53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMBuffer.html">MBuffer</a>* mbuf_create2 </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffer_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>min_resize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an MBuf.</p>
<p>If buffer_length or min_resize are negative or NULL, the default values are used instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer_length</td><td>initial memory allocation length </td></tr>
    <tr><td class="paramname">min_resize</td><td>minimun length by which the buffer should be grown when it is </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the newly allocated <a class="el" href="structMBuffer.html">MBuffer</a> </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mbuf_8c.html#afaf870b3cd0c265f7222b27871894a7c">DEF_BUF_SIZE</a>, <a class="el" href="mbuf_8c.html#adc5d29613b65d3b32fc5814b11c9c7d7">DEF_MIN_BUF_RESIZE</a> </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00058">58</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00055">MBuffer::allow_resizing</a>, <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, <a class="el" href="mbuf_8c_source.html#l00021">DEF_BUF_SIZE</a>, <a class="el" href="mbuf_8c_source.html#l00022">DEF_MIN_BUF_RESIZE</a>, <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>, <a class="el" href="mbuf_8h_source.html#l00035">MBuffer::length</a>, <a class="el" href="mbuf_8h_source.html#l00051">MBuffer::min_resize</a>, <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, <a class="el" href="mem_8c_source.html#l00240">oml_free()</a>, <a class="el" href="mem_8c_source.html#l00157">oml_malloc()</a>, <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="mbuf_8c_source.html#l00043">mbuf_create()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structMBuffer.html">MBuffer</a>* mbuf = <a class="code" href="omlc_8h.html#a8616cb714d6589098267bba8fc7b48c2">oml_malloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="structMBuffer.html">MBuffer</a>));</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> NULL;</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a> = buffer_length &gt; 0 ? buffer_length : <a class="code" href="mbuf_8c.html#afaf870b3cd0c265f7222b27871894a7c">DEF_BUF_SIZE</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a61ea70630a413fb9ed19ca899b7d3173">min_resize</a> = min_resize &gt; 0 ? min_resize : <a class="code" href="mbuf_8c.html#adc5d29613b65d3b32fc5814b11c9c7d7">DEF_MIN_BUF_RESIZE</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> = <a class="code" href="omlc_8h.html#a8616cb714d6589098267bba8fc7b48c2">oml_malloc</a> (mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> == NULL) {</div>
<div class="line">    <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a> (mbuf);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a> = 0;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> = 0;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a8eb9e9e7086176da74b3c171803453ea">allow_resizing</a> = 1;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant(mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> mbuf;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a15daddf2549ab368d5f307a1175c1df0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mbuf_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy an <a class="el" href="structMBuffer.html">MBuffer</a> and its storage.</p>
<p>Frees both the <a class="el" href="structMBuffer.html">MBuffer</a> object and its allocated buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to free </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00092">92</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, <a class="el" href="log_8c_source.html#l00333">logdebug()</a>, and <a class="el" href="mem_8c_source.html#l00240">oml_free()</a>.</p>

<p>Referenced by <a class="el" href="check__server_8c_source.html#l00069">check_server_destroy_client_handler()</a>, <a class="el" href="client__handler_8c_source.html#l00227">client_handler_free()</a>, and <a class="el" href="check__binary__protocol_8c_source.html#l00073">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span>(!mbuf)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a>(<span class="stringliteral">&quot;Destroying MBuffer %p\n&quot;</span>, mbuf);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a> (mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>);</div>
<div class="line">  <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a> (mbuf);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a60f8a8accde8c37e996b594310c59a26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_fill </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the currently occupied size of the <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the stored data size as an size_t </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00167">167</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>.</p>

<p>Referenced by <a class="el" href="check__binary__protocol_8c_source.html#l00220">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3d6c31ff377c7c04e348e2594031413e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_fill_excluding_msg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the currently occupied size of the <a class="el" href="structMBuffer.html">MBuffer</a>, not including the message currently being written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the stored data size as an size_t, or 0 if a message is currently being read </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00179">179</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, and <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> &gt; mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>) <span class="comment">/* message message being written */</span></div>
<div class="line">    <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line">  <span class="keywordflow">return</span> 0; <span class="comment">/* message being read; don&#39;t know how long it will be */</span></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af91b0996c673a65b2a9c728011911989"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_find </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find a byte in an <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to search </td></tr>
    <tr><td class="paramname">c</td><td>byte to search for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>offset from the read pointer to the first matching byte, or -1 if not found </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00540">540</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>

<p>Referenced by <a class="el" href="receiver_8c_source.html#l00058">read_header()</a>, and <a class="el" href="text_8c_source.html#l00142">text_read_msg_start()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  uint8_t* p = mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span> (p &lt; mbuf-&gt;wrptr &amp;&amp; *p != c) p++;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> result = -1;</div>
<div class="line">  <span class="keywordflow">if</span> (p &lt; mbuf-&gt;wrptr &amp;&amp; *p == c)</div>
<div class="line">    result = p - mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a366783ee90e476db40cd5788f7a39908"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_find_not </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find the first byte in an <a class="el" href="structMBuffer.html">MBuffer</a> different from argument.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to search </td></tr>
    <tr><td class="paramname">c</td><td>byte to <em>not</em> find </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>offset from the read pointer to the first non-matching byte, or -1 if not found </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00565">565</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>

<p>Referenced by <a class="el" href="receiver_8c_source.html#l00058">read_header()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  uint8_t* p = mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span> (p &lt; mbuf-&gt;wrptr &amp;&amp; *p == c) p++;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> result = -1;</div>
<div class="line">  <span class="keywordflow">if</span> (p &lt; mbuf-&gt;wrptr &amp;&amp; *p != c)</div>
<div class="line">    result = p - mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad77cb9e3d579e54318162f30c847b8f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the length of the <a class="el" href="structMBuffer.html">MBuffer</a>'s allocated buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the allocated size as an size_t </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00120">120</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00035">MBuffer::length</a>.</p>

<p>Referenced by <a class="el" href="check__liboml2__mbuf_8c_source.html#l00065">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a64f532f1d7946c6969320cc4313bc687"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* mbuf_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the beginning of the current message (msgptr) </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00262">262</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>.</p>

<p>Referenced by <a class="el" href="marshal_8c_source.html#l00897">marshal_finalize()</a>, <a class="el" href="marshal_8c_source.html#l00420">marshal_get_msgtype()</a>, <a class="el" href="marshal_8c_source.html#l00545">marshal_values()</a>, and <a class="el" href="check__libshared__marshal_8c_source.html#l01374">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3da005d3626ed935fcba222178675aec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_message_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current message's index.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the difference between rdptr and msgptr </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00225">225</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, and <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>

<p>Referenced by <a class="el" href="text_8c_source.html#l00198">text_read_msg_values()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1afcdf8eb3312a3006b1ed5cc8e8843e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_message_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current message's length.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the difference between wrptr and msgptr </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00236">236</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="marshal_8c_source.html#l00897">marshal_finalize()</a>, and <a class="el" href="check__libshared__marshal_8c_source.html#l01374">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6382054b006daff0ef5daf28e3c42a22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_message_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the message offset from the base of the <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the stored data size as an size_t </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00214">214</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, and <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>.</p>

<p>Referenced by <a class="el" href="mbuf_8c_source.html#l00249">mbuf_message_start_advance()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d56431fe4b652c78c51e68b3d1abde4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mbuf_message_start_advance </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Advance the message pointer, if room.</p>
<p>XXX: Fails silently otherwise.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
    <tr><td class="paramname">n</td><td>the length by which the pointer is advanced </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00249">249</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8c_source.html#l00214">mbuf_message_offset()</a>, and <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf &amp;&amp; n &lt; mbuf-&gt;fill - <a class="code" href="mbuf_8c.html#a6382054b006daff0ef5daf28e3c42a22">mbuf_message_offset</a> (mbuf)) {</div>
<div class="line">    mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> += n;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ffba68322618884256b946ee526e7e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_print </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Append the printed string described by format to the <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<p>Write the string described by a format string and arguments to the <a class="el" href="structMBuffer.html">MBuffer</a>, resizing it if need be.</p>
<p>If the function succeeds, the string is written starting at the <a class="el" href="structMBuffer.html">MBuffer</a>'s write pointer, and the write pointer is advanced by the size of the string (excluding the '\0').</p>
<p>NOTE: At the end, the write pointer points to the terminating NULL character of the string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to write the string to </td></tr>
    <tr><td class="paramname">format</td><td>format string </td></tr>
    <tr><td class="paramname">...</td><td>arguments for the format string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>
<dl class="section see"><dt>See Also</dt><dd>vsnprintf(3) </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00421">421</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>, <a class="el" href="mbuf_8c_source.html#l00354">mbuf_check_resize()</a>, <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL || format == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> len;</div>
<div class="line">  <span class="keywordtype">int</span> success = 0;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">do</span> {</div>
<div class="line">    va_list arglist;</div>
<div class="line">    va_start(arglist, format);</div>
<div class="line">    len = vsnprintf((<span class="keywordtype">char</span>*)mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a>, mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a>, format, arglist);</div>
<div class="line">    va_end(arglist);</div>
<div class="line">    <span class="keywordflow">if</span> (! (success = (len &lt;= (<span class="keywordtype">int</span>)mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a>))) {</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="mbuf_8c.html#a7adcc3b4987705ab7ccbdc73f7e57e1d">mbuf_check_resize</a>(mbuf, len) == -1)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">while</span> (! success);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* XXX: should we advance by one more to keep the &#39;\0&#39;? */</span></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> += len;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a> += len;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> -= len;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> += len;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acf28b4348adeea5087141f795c71bd7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_rd_remaining </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the remaining amount of data to read in <a class="el" href="structMBuffer.html">MBuffer</a></p>
<p>XXX: Shall we use rd_remaining directly?</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of unread bytes in the buffer </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00142">142</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="binary_8c_source.html#l00048">bin_find_sync()</a>, <a class="el" href="binary_8c_source.html#l00104">bin_read_msg_start()</a>, <a class="el" href="mbuf_8c_source.html#l00129">mbuf_remaining()</a>, <a class="el" href="check__binary__protocol_8c_source.html#l00093">START_TEST()</a>, <a class="el" href="marshal_8c_source.html#l00951">unmarshal_init()</a>, and <a class="el" href="marshal_8c_source.html#l01101">unmarshal_value()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad1e104ade5f0bd7a063e5673349f64b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* mbuf_rdptr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the read pointer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the read pointer rdptr </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00273">273</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>

<p>Referenced by <a class="el" href="binary_8c_source.html#l00048">bin_find_sync()</a>, <a class="el" href="receiver_8c_source.html#l00145">proxy_message_loop()</a>, and <a class="el" href="marshal_8c_source.html#l01101">unmarshal_value()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7217f65b708944e4f3f5d2f45e436a99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read bytes from an <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<p>Read len bytes from the <a class="el" href="structMBuffer.html">MBuffer</a> into the raw buffer pointed to by buf. If the <a class="el" href="structMBuffer.html">MBuffer</a> doesn't have at least len bytes available to read, the function fails.</p>
<p>If the function succeeds, the bytes are written to buf, with reading starting at the <a class="el" href="structMBuffer.html">MBuffer</a>'s read pointer, and the read pointer is then advanced by len bytes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to read from </td></tr>
    <tr><td class="paramname">buf</td><td>buffer into which the read data should be put </td></tr>
    <tr><td class="paramname">len</td><td>size of data to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00466">466</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>

<p>Referenced by <a class="el" href="binary_8c_source.html#l00104">bin_read_msg_start()</a>, <a class="el" href="check__liboml2__mbuf_8c_source.html#l00246">START_TEST()</a>, <a class="el" href="marshal_8c_source.html#l00951">unmarshal_init()</a>, and <a class="el" href="marshal_8c_source.html#l01101">unmarshal_value()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL || buf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> &lt; len) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  memcpy (buf, mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>, len);</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> += len;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> -= len;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2b5ff5e389e38561d10aee1be2c511f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_read_byte </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a single byte from an <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to read from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the read byte, or -1 if no data was available </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00515">515</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>

<p>Referenced by <a class="el" href="marshal_8c_source.html#l01101">unmarshal_value()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> &lt; 1) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> byte = (int)*(mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>);</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>++;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a>--;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> byte;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad04587b7a099c466b3b514778ba29d4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_read_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the read offset from the base of the <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the stored data size as an size_t </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00192">192</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, and <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a906aa8bcabc6a81ad4a699bb021b959c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_read_skip </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Skip some data to be read from an <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<p>This simply advances the read pointer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
    <tr><td class="paramname">len</td><td>amount of data to skip </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, or -1 otherwise </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00493">493</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>.</p>

<p>Referenced by <a class="el" href="binary_8c_source.html#l00048">bin_find_sync()</a>, <a class="el" href="binary_8c_source.html#l00104">bin_read_msg_start()</a>, <a class="el" href="receiver_8c_source.html#l00145">proxy_message_loop()</a>, <a class="el" href="receiver_8c_source.html#l00058">read_header()</a>, <a class="el" href="check__binary__protocol_8c_source.html#l00073">START_TEST()</a>, <a class="el" href="marshal_8c_source.html#l01101">unmarshal_value()</a>, and <a class="el" href="marshal_8c_source.html#l01062">unmarshal_values()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> &lt; len) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> += len;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> -= len;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2089ca5ad8c93dc8ed74d35ce200cad1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_remaining </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the remaining amount of data to read in <a class="el" href="structMBuffer.html">MBuffer</a> XXX: Use mbuf_rd_remaining instead </p>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00129">129</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8c_source.html#l00142">mbuf_rd_remaining()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="mbuf_8c.html#acf28b4348adeea5087141f795c71bd7a">mbuf_rd_remaining</a>(mbuf);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a88e6f090bbfc4005582dd69424611a41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_repack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Repack an <a class="el" href="structMBuffer.html">MBuffer</a> so the next data to read is at the start of the allocated memory.</p>
<p>This adjust the read and write pointers accordingly, and resets the message pointer to the base of the allocated memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 otherwise </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mbuf_8h.html#a6197418fb3ef89250ac51be751e7805c">mbuf_repack_message</a>, <a class="el" href="mbuf_8h.html#ae5a8aa8cdfed676885ffda0499810985">mbuf_repack_message2</a> </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00758">758</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>, <a class="el" href="mbuf_8h_source.html#l00035">MBuffer::length</a>, <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="check__liboml2__mbuf_8c_source.html#l00502">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  memmove (mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>, mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>, mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a>);</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> + mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6197418fb3ef89250ac51be751e7805c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_repack_message </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Repack an <a class="el" href="structMBuffer.html">MBuffer</a> to start with the current message, keeping R/W pointers.</p>
<p>The read pointer is preserved so it points to the same location of the message after repacking, while the write pointer points right after the end of the data still to read in the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00785">785</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>, <a class="el" href="mbuf_8h_source.html#l00035">MBuffer::length</a>, <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="oml2-proxy-server_8c_source.html#l00081">client_callback()</a>, and <a class="el" href="check__liboml2__mbuf_8c_source.html#l00555">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">size_t</span> msg_remaining = mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>;</div>
<div class="line"></div>
<div class="line">  memmove (mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>, mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>, msg_remaining);</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> + mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae5a8aa8cdfed676885ffda0499810985"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_repack_message2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Repack an <a class="el" href="structMBuffer.html">MBuffer</a> to start with the current message, resetting read pointer.</p>
<p>The read pointer is reset to point at the beginning of the message, while the write pointer points to the end of the data still to read in the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00815">815</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>, <a class="el" href="mbuf_8h_source.html#l00035">MBuffer::length</a>, <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">size_t</span> msg_size = mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (msg_size &gt; 0)</div>
<div class="line">    memmove (mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>, mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>, msg_size);</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a> = msg_size;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a> - msg_size;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> = msg_size;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> + msg_size;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abf9a6c655d77bfc4f8d0299ce65a08c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_reset_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the read pointer to the beginning of the message.</p>
<p>Adjust the rdptr to the current msgptr.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00703">703</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="receiver_8c_source.html#l00145">proxy_message_loop()</a>, <a class="el" href="check__liboml2__mbuf_8c_source.html#l00377">START_TEST()</a>, and <a class="el" href="marshal_8c_source.html#l00951">unmarshal_init()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// If in the middle of a write, can&#39;t do a read reset</span></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> &gt; mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac4ddd843a465364728d9b113cc2e63d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_reset_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reset the write pointer to the beginning of the message.</p>
<p>Adjust the wrptr to the current msgptr.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00675">675</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>, <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="marshal_8c_source.html#l00495">marshal_measurements()</a>, <a class="el" href="marshal_8c_source.html#l00577">marshal_value()</a>, and <a class="el" href="check__liboml2__mbuf_8c_source.html#l00426">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// If in the middle of a read, can&#39;t do a write reset</span></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> &gt; mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">size_t</span> msglen = mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a> -= msglen;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> += msglen;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> -= msglen;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ee5265b405f90d567f5291c636ed185"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_resize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resize an <a class="el" href="structMBuffer.html">MBuffer</a>'s allocated storage.</p>
<p>If new_length is smaller than that of the current storage, do nothing.</p>
<p>If new_length is larger than the current storage by less than the min_resize specified for the <a class="el" href="structMBuffer.html">MBuffer</a>, the allocated memory is grown by min_resize. (XXX: This behaviour is currently disabled).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
    <tr><td class="paramname">new_length</td><td>length to which the buffer should be grown </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, or -1 on error </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mbuf_8h.html#a765ec3ef2a50e81e94bdbde95973e362">mbuf_create</a>, <a class="el" href="mbuf_8h.html#a520c13f0a7c6f3d91824650eec985e53">mbuf_create2</a>, <a class="el" href="mbuf_8c.html#adc5d29613b65d3b32fc5814b11c9c7d7">DEF_MIN_BUF_RESIZE</a> </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00303">303</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00055">MBuffer::allow_resizing</a>, <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>, <a class="el" href="mbuf_8h_source.html#l00035">MBuffer::length</a>, <a class="el" href="mbuf_8h_source.html#l00048">MBuffer::msgptr</a>, <a class="el" href="mem_8c_source.html#l00206">oml_realloc()</a>, <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, <a class="el" href="mbuf_8h_source.html#l00053">MBuffer::resized</a>, <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="mbuf_8c_source.html#l00354">mbuf_check_resize()</a>, and <a class="el" href="check__liboml2__mbuf_8c_source.html#l00072">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL || mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> == NULL)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Don&#39;t resize if we don&#39;t have to */</span></div>
<div class="line">  <span class="keywordflow">if</span> (new_length &lt;= mbuf-&gt;length)</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (! mbuf-&gt;<a class="code" href="structMBuffer.html#a8eb9e9e7086176da74b3c171803453ea">allow_resizing</a>)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line"><span class="comment">/*   // Make sure we grow at leat by a minimum delta */</span></div>
<div class="line"><span class="comment">/*   if ((new_length - mbuf-&gt;length) &lt; mbuf-&gt;min_resize) { */</span></div>
<div class="line"><span class="comment">/*     new_length = mbuf-&gt;length + mbuf-&gt;min_resize; */</span></div>
<div class="line"><span class="comment">/*   } */</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> wr_offset = mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">  <span class="keywordtype">int</span> rd_offset = mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">  <span class="keywordtype">int</span> msg_offset = mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line"></div>
<div class="line">  assert (wr_offset == (<span class="keywordtype">int</span>)mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a>);</div>
<div class="line"></div>
<div class="line">  uint8_t* <span class="keyword">new</span> = <a class="code" href="mem_8c.html#ae75af3096ebd921116baca5ed9208488">oml_realloc</a> (mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>, new_length);</div>
<div class="line">  <span class="keywordflow">if</span> (<span class="keyword">new</span> == NULL)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> = <span class="keyword">new</span>;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> + wr_offset;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> + rd_offset;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#af292d017b7c04e797f0d1467b84d00b5">msgptr</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a> + msg_offset;</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#ace3039864ef0cc240c3db7390de2491a">resized</a> += (new_length - mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a>);</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a> = new_length;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> = mbuf-&gt;<a class="code" href="structMBuffer.html#aa513d3a69c07fdfab78133f5fe220e69">length</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a>;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6bb8514a1a3dd56456f64fb05dc4b334"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_wr_remaining </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the remaining amount of data to write in <a class="el" href="structMBuffer.html">MBuffer</a></p>
<p>XXX: Shall we use wr_remaining directly?</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of unread bytes in the buffer </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00155">155</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00044">MBuffer::rdptr</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="buffered__writer_8c_source.html#l00232">_bw_push()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a4f88072e9349ab18678d611eea4196ac">rdptr</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acb5cd36b259b0df7a3173259835dbba0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mbuf_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write data into an <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<p>Write len bytes from the raw buffer pointed to by buf into the <a class="el" href="structMBuffer.html">MBuffer</a>. If the <a class="el" href="structMBuffer.html">MBuffer</a> doesn't have enough remaining space to fit len bytes, nothing is written and the function fails.</p>
<p>If the function succeeds, the data is written starting at the <a class="el" href="structMBuffer.html">MBuffer</a>'s write pointer, and the write pointer is advanced by len bytes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to write data into </td></tr>
    <tr><td class="paramname">buf</td><td>data to write </td></tr>
    <tr><td class="paramname">len</td><td>length of the buffer of data (not including \0 for strings) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure. </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00381">381</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00041">MBuffer::fill</a>, <a class="el" href="mbuf_8c_source.html#l00354">mbuf_check_resize()</a>, <a class="el" href="mbuf_8h_source.html#l00039">MBuffer::rd_remaining</a>, <a class="el" href="mbuf_8h_source.html#l00037">MBuffer::wr_remaining</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="buffered__writer_8c_source.html#l00232">_bw_push()</a>, <a class="el" href="buffered__writer_8c_source.html#l00288">_bw_push_meta()</a>, <a class="el" href="marshal_8c_source.html#l00897">marshal_finalize()</a>, <a class="el" href="marshal_8c_source.html#l00495">marshal_measurements()</a>, <a class="el" href="marshal_8c_source.html#l00577">marshal_value()</a>, <a class="el" href="receiver_8c_source.html#l00145">proxy_message_loop()</a>, and <a class="el" href="check__binary__protocol_8c_source.html#l00073">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mbuf == NULL || buf == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="mbuf_8c.html#a7adcc3b4987705ab7ccbdc73f7e57e1d">mbuf_check_resize</a> (mbuf, len) == -1)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  memcpy (mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a>, buf, len);</div>
<div class="line"></div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> += len;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#ac8b0500b1655048c350b8e3a45c8e123">fill</a> += len;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a4c6858d7501c31c61820fca0a9b542e0">wr_remaining</a> -= len;</div>
<div class="line">  mbuf-&gt;<a class="code" href="structMBuffer.html#a66620d08cfc91ca5f54b60f5b84a4be4">rd_remaining</a> += len;</div>
<div class="line"></div>
<div class="line">  mbuf_check_invariant (mbuf);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aca2b308379cb7bb52d20642811238a2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t mbuf_write_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the write offset from the base of the <a class="el" href="structMBuffer.html">MBuffer</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the stored data size as an size_t </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00203">203</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00033">MBuffer::base</a>, and <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>

<p>Referenced by <a class="el" href="buffered__writer_8c_source.html#l00365">bw_get_write_buf()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a> - mbuf-&gt;<a class="code" href="structMBuffer.html#a99e1431a6e9584380b12df832714b2f9">base</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1a89ee1145322e7235d13707c79edd77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* mbuf_wrptr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMBuffer.html">MBuffer</a> *&#160;</td>
          <td class="paramname"><em>mbuf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the write pointer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mbuf</td><td><a class="el" href="structMBuffer.html">MBuffer</a> to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the write pointer wrptr </dd></dl>

<p>Definition at line <a class="el" href="mbuf_8c_source.html#l00284">284</a> of file <a class="el" href="mbuf_8c_source.html">mbuf.c</a>.</p>

<p>References <a class="el" href="mbuf_8h_source.html#l00046">MBuffer::wrptr</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> mbuf-&gt;<a class="code" href="structMBuffer.html#a859c46c105f32fcf1113e7ec9151cc28">wrptr</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_0ce1951afc5b1d55c9adea1f4ae57fb4.html">shared</a></li><li class="navelem"><a class="el" href="mbuf_8h.html">mbuf.h</a></li>
    <li class="footer">Generated on Thu Jun 25 2015 15:31:55 for oml2 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
