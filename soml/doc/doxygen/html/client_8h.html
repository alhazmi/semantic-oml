<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>oml2: client.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="oml_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">oml2
   &#160;<span id="projectnumber">2.12.0pre.79-58cf-dirty</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('client_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">client.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines various structures and functions used by various parts.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="omlc_8h_source.html">oml2/omlc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="oml__filter_8h_source.html">oml2/oml_filter.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="oml__writer_8h_source.html">oml2/oml_writer.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="oml__out__stream_8h_source.html">oml2/oml_out_stream.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mstring_8h_source.html">mstring.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for client.h:</div>
<div class="dyncontent">
<div class="center"><img src="client_8h__incl.png" border="0" usemap="#client_8h" alt=""/></div>
<map name="client_8h" id="client_8h">
<area shape="rect" id="node7" href="omlc_8h.html" title="Public API of the OML client library." alt="" coords="268,237,361,267"/><area shape="rect" id="node25" href="oml__filter_8h.html" title="Abstract interface for filters." alt="" coords="301,83,419,112"/><area shape="rect" id="node28" href="oml__writer_8h.html" title="Abstract interface for writers." alt="" coords="352,160,477,189"/><area shape="rect" id="node32" href="oml__out__stream_8h.html" title="Abstract interface for output streams." alt="" coords="569,237,727,267"/><area shape="rect" id="node35" href="mstring_8h.html" title="mstring.h" alt="" coords="501,160,576,189"/><area shape="rect" id="node21" href="o__log_8h.html" title="ocomm/o_log.h" alt="" coords="376,315,485,344"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="client_8h__dep__incl.png" border="0" usemap="#client_8hdep" alt=""/></div>
<map name="client_8hdep" id="client_8hdep">
<area shape="rect" id="node3" href="api_8c.html" title="Implement the user&#45;visible API of OML." alt="" coords="5,83,56,112"/><area shape="rect" id="node5" href="bin__writer_8c.html" title="An implementation of the OmlWriter interface functions (see oml2/oml_writer.h) that writes messages u..." alt="" coords="80,83,168,112"/><area shape="rect" id="node7" href="buffered__writer_8c.html" title="A non&#45;blocking, self&#45;draining FIFO queue using threads." alt="" coords="192,83,309,112"/><area shape="rect" id="node9" href="file__stream_8c.html" title="An OmlOutStream implementation that writer that writes measurement tuples to a file on the local file..." alt="" coords="333,83,429,112"/><area shape="rect" id="node11" href="filter_8c.html" title="OML&#39;s client side filter engine." alt="" coords="453,83,512,112"/><area shape="rect" id="node13" href="init_8c.html" title="Implement the user&#45;visible initialisation routines of the user&#45;visible OML API." alt="" coords="536,83,587,112"/><area shape="rect" id="node15" href="misc_8c.html" title="Implements various common utility functions (XXX: Only mutex lock/unlock)." alt="" coords="611,83,672,112"/><area shape="rect" id="node17" href="net__stream_8c.html" title="An OmlOutStream implementation that writer that sends measurement tuples over the network..." alt="" coords="696,83,795,112"/><area shape="rect" id="node19" href="parse__config_8c.html" title="The XML configuration file parser functions." alt="" coords="819,83,925,112"/><area shape="rect" id="node21" href="text__writer_8c.html" title="An implementation of the OmlWriter interface functions (see oml2/oml_writer.h) that serializes measur..." alt="" coords="949,83,1043,112"/><area shape="rect" id="node23" href="check__liboml2__api_8c.html" title="Test the user&#45;visible OML API." alt="" coords="1067,83,1205,112"/><area shape="rect" id="node25" href="check__liboml2__writers_8c.html" title="check_liboml2_writers.c" alt="" coords="1229,83,1392,112"/></map>
</div>
</div>
<p><a href="client_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOmlClient.html">OmlClient</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5be3da2fcc3e91c1d5acbaa8349804a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a5be3da2fcc3e91c1d5acbaa8349804a7">COLLECTION_URI_MAX_LENGTH</a>&#160;&#160;&#160;64</td></tr>
<tr class="memitem:aeec40e2b433cc2844853d184006edff0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#aeec40e2b433cc2844853d184006edff0">xstr</a>(s)&#160;&#160;&#160;<a class="el" href="check__liboml2__omlvalue_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>(s)</td></tr>
<tr class="memitem:ad8ab729381f270b100f3d05b6c6676fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#ad8ab729381f270b100f3d05b6c6676fc">str</a>(s)&#160;&#160;&#160;#s</td></tr>
<tr class="memitem:a3aaff003637cf49539879ebf960c7764"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a3aaff003637cf49539879ebf960c7764">DEF_PORT</a>&#160;&#160;&#160;3003</td></tr>
<tr class="memitem:a4add3cf418c470c13d6aeb69187a1740"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a4add3cf418c470c13d6aeb69187a1740">DEF_PORT_STRING</a>&#160;&#160;&#160;<a class="el" href="client_8h.html#aeec40e2b433cc2844853d184006edff0">xstr</a>(<a class="el" href="oml2-proxy-server_8c.html#a3aaff003637cf49539879ebf960c7764">DEF_PORT</a>)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a4516908fc623d86fc76288be6888a6df"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structOmlClient.html">OmlClient</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a4516908fc623d86fc76288be6888a6df">OmlClient</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2b7b282aa3dee35bbc5656e9ce5204c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a2b7b282aa3dee35bbc5656e9ce5204c9">find_mp</a> (const char *<a class="el" href="check__text__protocol_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr class="memitem:adb0da318e59f1e48cbef3255e272ebdf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#adb0da318e59f1e48cbef3255e272ebdf">find_mp_field</a> (const char *<a class="el" href="check__text__protocol_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="el" href="structOmlMP.html">OmlMP</a> *<a class="el" href="structmp.html">mp</a>)</td></tr>
<tr class="memitem:a17d38a142ff7946ea46d63b5e761ae63"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a17d38a142ff7946ea46d63b5e761ae63">find_mstream</a> (const char *<a class="el" href="check__text__protocol_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
<tr class="memitem:aceaf7c6f990869cc30bb729f2addf5e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#aceaf7c6f990869cc30bb729f2addf5e7">find_mstream_in_mp</a> (const char *<a class="el" href="check__text__protocol_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="el" href="structOmlMP.html">OmlMP</a> *<a class="el" href="structmp.html">mp</a>)</td></tr>
<tr class="memitem:a5c8c53afa6d604173e0abd9b2a824089"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a5c8c53afa6d604173e0abd9b2a824089">oml_mp_get_default_ms</a> (<a class="el" href="structOmlMP.html">OmlMP</a> *<a class="el" href="structmp.html">mp</a>)</td></tr>
<tr class="memitem:a94accc8192536cbda920a4f3adf26c34"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a94accc8192536cbda920a4f3adf26c34">oml_ms_add_writer</a> (<a class="el" href="structOmlMStream.html">OmlMStream</a> *ms, <a class="el" href="structOmlWriter.html">OmlWriter</a> *w)</td></tr>
<tr class="memitem:a9702786aa9c44bc70b9525025de8740a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMString.html">MString</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a9702786aa9c44bc70b9525025de8740a">mp_fields_summary</a> (<a class="el" href="structOmlMP.html">OmlMP</a> *<a class="el" href="structmp.html">mp</a>)</td></tr>
<tr class="memitem:ac821f21a0da9c8aae8be1cac73331166"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#ac821f21a0da9c8aae8be1cac73331166">destroy_mp</a> (<a class="el" href="structOmlMP.html">OmlMP</a> *<a class="el" href="structmp.html">mp</a>)</td></tr>
<tr class="memitem:aae69d5e89a47ef7b1324df2155bcfa8b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#aae69d5e89a47ef7b1324df2155bcfa8b">create_mstream</a> (const char *<a class="el" href="check__text__protocol_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="el" href="structOmlMP.html">OmlMP</a> *<a class="el" href="structmp.html">mp</a>, <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer, double sample_interval, int sample_thres)</td></tr>
<tr class="memitem:a96b21fffa7aa1578b2a2a163422cfffe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a96b21fffa7aa1578b2a2a163422cfffe">destroy_ms</a> (<a class="el" href="structOmlMStream.html">OmlMStream</a> *ms)</td></tr>
<tr class="memitem:accd762f6cd773e4bfb598096410b0bf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#accd762f6cd773e4bfb598096410b0bf5">create_default_filters</a> (<a class="el" href="structOmlMP.html">OmlMP</a> *<a class="el" href="structmp.html">mp</a>, <a class="el" href="structOmlMStream.html">OmlMStream</a> *ms)</td></tr>
<tr class="memitem:ab4756e8f48a7af991ab99e4e5894af52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlFilter.html">OmlFilter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#ab4756e8f48a7af991ab99e4e5894af52">create_default_filter</a> (<a class="el" href="structOmlMPDef.html">OmlMPDef</a> *def, <a class="el" href="structOmlMStream.html">OmlMStream</a> *ms, int index)</td></tr>
<tr class="memitem:a1740a7e71f0ae4e436464805e071c37e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a1740a7e71f0ae4e436464805e071c37e">filter_engine_start</a> (<a class="el" href="structOmlMStream.html">OmlMStream</a> *<a class="el" href="structmp.html">mp</a>)</td></tr>
<tr class="memitem:a2bb910d0f3c68f70719113b1920e6931"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a2bb910d0f3c68f70719113b1920e6931">filter_process</a> (<a class="el" href="structOmlMStream.html">OmlMStream</a> *<a class="el" href="structmp.html">mp</a>)</td></tr>
<tr class="memitem:aa1f46a06d6e6693cba8548a3cc4048e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#aa1f46a06d6e6693cba8548a3cc4048e8">mp_lock</a> (<a class="el" href="structOmlMP.html">OmlMP</a> *<a class="el" href="structmp.html">mp</a>)</td></tr>
<tr class="memitem:ae9551b52d060a0d9cf2aa2c01f5f5d12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#ae9551b52d060a0d9cf2aa2c01f5f5d12">mp_unlock</a> (<a class="el" href="structOmlMP.html">OmlMP</a> *<a class="el" href="structmp.html">mp</a>)</td></tr>
<tr class="memitem:a861bb71000024af9ccc3f6b5fe9a9e43"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a861bb71000024af9ccc3f6b5fe9a9e43">oml_lock</a> (pthread_mutex_t *mutexP, const char *mutexName)</td></tr>
<tr class="memitem:ab63adbadcb0c3da575b790cfebfe99b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#ab63adbadcb0c3da575b790cfebfe99b3">oml_unlock</a> (pthread_mutex_t *mutexP, const char *mutexName)</td></tr>
<tr class="memitem:acc0688538601983d020dbef70135ef0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#acc0688538601983d020dbef70135ef0f">oml_lock_persistent</a> (pthread_mutex_t *mutexP, const char *mutexName)</td></tr>
<tr class="memitem:a1654081a08d8239be5a9bcff2f2cc69d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlWriter.html">OmlWriter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a1654081a08d8239be5a9bcff2f2cc69d">text_writer_new</a> (<a class="el" href="structOmlOutStream.html">OmlOutStream</a> *out_stream)</td></tr>
<tr class="memitem:a5b581177f0c4b16e69c2ce68f60d7cff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlWriter.html">OmlWriter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a5b581177f0c4b16e69c2ce68f60d7cff">bin_writer_new</a> (<a class="el" href="structOmlOutStream.html">OmlOutStream</a> *out_stream)</td></tr>
<tr class="memitem:ac7dd4a100ddaba640ad0f3f19af7ae06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlOutStream.html">OmlOutStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#ac7dd4a100ddaba640ad0f3f19af7ae06">file_stream_new</a> (const char *file)</td></tr>
<tr class="memitem:a7e29655c822b05e3ebe7daf7308024e9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a7e29655c822b05e3ebe7daf7308024e9">file_stream_set_buffered</a> (<a class="el" href="structOmlOutStream.html">OmlOutStream</a> *hdl, int buffered)</td></tr>
<tr class="memitem:a3c464de2b06ba5aec1a33ffee964dfa0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a3c464de2b06ba5aec1a33ffee964dfa0">file_stream_get_buffered</a> (<a class="el" href="structOmlOutStream.html">OmlOutStream</a> *hdl)</td></tr>
<tr class="memitem:af08fdd1497353e7fe6820aa5e1f765e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlOutStream.html">OmlOutStream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#af08fdd1497353e7fe6820aa5e1f765e9">net_stream_new</a> (const char *transport, const char *hostname, const char *port)</td></tr>
<tr class="memitem:a4412addfb041b81d8b5dd6ce44153952"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#a4412addfb041b81d8b5dd6ce44153952">validate_app_name</a> (const char *<a class="el" href="check__text__protocol_8c.html#a5ac083a645d964373f022d03df4849c8">name</a>)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae265e6c78eb3c0a1f4fdb40fe894394e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlClient.html">OmlClient</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Defines various structures and functions used by various parts. </p>

<p>Definition in file <a class="el" href="client_8h_source.html">client.h</a>.</p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="a5be3da2fcc3e91c1d5acbaa8349804a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COLLECTION_URI_MAX_LENGTH&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="client_8h_source.html#l00026">26</a> of file <a class="el" href="client_8h_source.html">client.h</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00096">omlc_init()</a>.</p>

</div>
</div>
<a class="anchor" id="a3aaff003637cf49539879ebf960c7764"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEF_PORT&#160;&#160;&#160;3003</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="client_8h_source.html#l00030">30</a> of file <a class="el" href="client_8h_source.html">client.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4add3cf418c470c13d6aeb69187a1740"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEF_PORT_STRING&#160;&#160;&#160;<a class="el" href="client_8h.html#aeec40e2b433cc2844853d184006edff0">xstr</a>(<a class="el" href="oml2-proxy-server_8c.html#a3aaff003637cf49539879ebf960c7764">DEF_PORT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="client_8h_source.html#l00031">31</a> of file <a class="el" href="client_8h_source.html">client.h</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00741">create_writer()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8ab729381f270b100f3d05b6c6676fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define str</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s</td><td>)</td>
          <td>&#160;&#160;&#160;#s</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="client_8h_source.html#l00029">29</a> of file <a class="el" href="client_8h_source.html">client.h</a>.</p>

</div>
</div>
<a class="anchor" id="aeec40e2b433cc2844853d184006edff0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define xstr</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">s</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="check__liboml2__omlvalue_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>(s)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="client_8h_source.html#l00028">28</a> of file <a class="el" href="client_8h_source.html">client.h</a>.</p>

</div>
</div>
<h2>Typedef Documentation</h2>
<a class="anchor" id="a4516908fc623d86fc76288be6888a6df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structOmlClient.html">OmlClient</a>  <a class="el" href="structOmlClient.html">OmlClient</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Internal data structure holding OML parameters </p>

</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="a5b581177f0c4b16e69c2ce68f60d7cff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlWriter.html">OmlWriter</a>* bin_writer_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlOutStream.html">OmlOutStream</a> *&#160;</td>
          <td class="paramname"><em>out_stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new <a class="el" href="structOmlBinWriter.html">OmlBinWriter</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out_stream</td><td><a class="el" href="structOmlOutStream.html">OmlOutStream</a> into which the data should be written</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the new <a class="el" href="structOmlBinWriter.html">OmlBinWriter</a> cast as an <a class="el" href="structOmlWriter.html">OmlWriter</a></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="structBufferedWriter.html">BufferedWriter</a> </dd></dl>

<p>Definition at line <a class="el" href="bin__writer_8c_source.html#l00091">91</a> of file <a class="el" href="bin__writer_8c_source.html">bin_writer.c</a>.</p>

<p>References <a class="el" href="buffered__writer_8c_source.html#l00108">bw_create()</a>, <a class="el" href="client_8h_source.html#l00067">OmlClient::max_queue</a>, <a class="el" href="marshal_8h_source.html#l00034">OMB_DATA_P</a>, <a class="el" href="mem_8c_source.html#l00157">oml_malloc()</a>, and <a class="el" href="init_8c_source.html#l00040">omlc_instance</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00741">create_writer()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  assert(out_stream != NULL);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="structOmlBinWriter.html">OmlBinWriter</a>* <span class="keyword">self</span> = (<a class="code" href="structOmlBinWriter.html">OmlBinWriter</a> *)<a class="code" href="omlc_8h.html#a8616cb714d6589098267bba8fc7b48c2">oml_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structOmlBinWriter.html">OmlBinWriter</a>));</div>
<div class="line">  memset(<span class="keyword">self</span>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structOmlBinWriter.html">OmlBinWriter</a>));</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>-&gt;bufferedWriter = <a class="code" href="buffered__writer_8c.html#a3ecd9e79fcb660670057ba8ccbde739a">bw_create</a>(out_stream,</div>
<div class="line">      <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#abfc08a3aa1c2c3d81dcb7580d14ee95b">max_queue</a>, 0);</div>
<div class="line">  <span class="keyword">self</span>-&gt;out_stream = out_stream;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>-&gt;meta = owb_meta;</div>
<div class="line">  <span class="keyword">self</span>-&gt;header_done = owb_header_done;</div>
<div class="line">  <span class="keyword">self</span>-&gt;row_start = owb_row_start;</div>
<div class="line">  <span class="keyword">self</span>-&gt;row_end = owb_row_end;</div>
<div class="line">  <span class="keyword">self</span>-&gt;out = owb_row_cols;</div>
<div class="line">  <span class="keyword">self</span>-&gt;close = owb_close;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>-&gt;msgtype = <a class="code" href="marshal_8h.html#aae2cbd51c9149df19ecd8e790db4ab0aa98d5a2a2fd99f1cea2d4f90ece79cf49">OMB_DATA_P</a>; <span class="comment">// Short packets.</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> (<a class="code" href="structOmlWriter.html">OmlWriter</a>*)<span class="keyword">self</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab4756e8f48a7af991ab99e4e5894af52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlFilter.html">OmlFilter</a>* create_default_filter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMPDef.html">OmlMPDef</a> *&#160;</td>
          <td class="paramname"><em>def</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td>
          <td class="paramname"><em>ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new filter for the measurement associated with the stream </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">def</td><td><a class="el" href="structOmlMPDef.html">OmlMPDef</a> of the MP for which to create a filter </td></tr>
    <tr><td class="paramname">ms</td><td><a class="el" href="structOmlMStream.html">OmlMStream</a> in which the filter outputs its samples </td></tr>
    <tr><td class="paramname">index</td><td>index of the field to filter within this MP </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new filter </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l01224">1224</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="factory_8c_source.html#l00091">create_filter()</a>, <a class="el" href="omlc_8h_source.html#l00668">OmlMPDef::name</a>, <a class="el" href="init_8c_source.html#l01493">name</a>, <a class="el" href="omlc_8h_source.html#l00069">omlc_is_numeric_type</a>, <a class="el" href="omlc_8h_source.html#l00671">OmlMPDef::param_types</a>, <a class="el" href="omlc_8h_source.html#l00674">OmlMPDef::relations</a>, <a class="el" href="omlc_8h_source.html#l00761">OmlMStream::sample_interval</a>, <a class="el" href="omlc_8h_source.html#l00758">OmlMStream::sample_thres</a>, and <a class="el" href="oml__value_8c_source.html#l00042">type</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l01187">create_default_filters()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = def-&gt;<a class="code" href="structOmlMPDef.html#a4d058714a8007ca1a7cccc6b35aebdd1">name</a>;</div>
<div class="line">  <a class="code" href="omlc_8h.html#ab15565231ebb9d8d8550c14e0aaa3012">OmlValueT</a> <a class="code" href="oml__value_8c.html#ae1087eeb503fb7b11a810d93605c97df">type</a> = def-&gt;<a class="code" href="structOmlMPDef.html#ae973305703cc2bbc5d72f110db6eba38">param_types</a>;</div>
<div class="line">  <a class="code" href="structOMLSemDef.html">OMLSemDef</a> * concepts = def-&gt;<a class="code" href="structOmlMPDef.html#a16cc14202a8d12ac8929b7889ea34d1d">relations</a>;</div>
<div class="line">  <span class="keywordtype">int</span> multiple_samples = ms-&gt;<a class="code" href="structOmlMStream.html#a6dce39ba9a9266928eef2ce42849322e">sample_thres</a> &gt; 1 || ms-&gt;<a class="code" href="structOmlMStream.html#abb765cd3168964526028974b5395bf5e">sample_interval</a> &gt; 0;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">char</span>* fname;</div>
<div class="line">  <span class="keywordflow">if</span> (multiple_samples &amp;&amp; <a class="code" href="omlc_8h.html#a86f8c871de57e71f81d9bc85469de71c">omlc_is_numeric_type</a> (type)) {</div>
<div class="line">    fname = <span class="stringliteral">&quot;avg&quot;</span>;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    fname = <span class="stringliteral">&quot;first&quot;</span>;</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="structOmlFilter.html">OmlFilter</a>* f = <a class="code" href="factory_8c.html#a157c9b15749028d109b7bb009ceb1bbd">create_filter</a>(fname, name, type, concepts, index);</div>
<div class="line">  <span class="keywordflow">return</span> f;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="accd762f6cd773e4bfb598096410b0bf5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void create_default_filters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td>
          <td class="paramname"><em>mp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create the default filters </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mp</td><td><a class="el" href="structOmlMP.html">OmlMP</a> to add filters to </td></tr>
    <tr><td class="paramname">ns</td><td><a class="el" href="structOmlMStream.html">OmlMStream</a> associated to mp </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l01187">1187</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="init_8c_source.html#l01224">create_default_filter()</a>, <a class="el" href="log_8c_source.html#l00333">logdebug()</a>, <a class="el" href="log_8c_source.html#l00297">logerror()</a>, <a class="el" href="omlc_8h_source.html#l00691">OmlMP::name</a>, <a class="el" href="oml__filter_8h_source.html#l00143">OmlFilter::next</a>, <a class="el" href="omlc_8h_source.html#l00696">OmlMP::param_count</a>, <a class="el" href="omlc_8h_source.html#l00694">OmlMP::param_defs</a>, and <a class="el" href="omlc_8h_source.html#l00739">OmlMStream::table_name</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l01153">oml_mp_get_default_ms()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> j;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(!mp || !ms) {</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> param_count = mp-&gt;<a class="code" href="structOmlMP.html#a15a16f8336c4ddb062432f391f40a302">param_count</a>;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a>(<span class="stringliteral">&quot;Creating default filters on MP &#39;%s&#39; to MS &#39;%s&#39;\n&quot;</span>,</div>
<div class="line">      mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>, ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="structOmlFilter.html">OmlFilter</a>* prev = NULL;</div>
<div class="line">  <span class="keywordflow">for</span> (j = 0; j &lt; param_count; j++) {</div>
<div class="line">    <a class="code" href="structOmlMPDef.html">OmlMPDef</a> def = mp-&gt;<a class="code" href="structOmlMP.html#a8269442d91a3e59d2e26b254eb232d3e">param_defs</a>[j];</div>
<div class="line">    <a class="code" href="structOmlFilter.html">OmlFilter</a>* f = <a class="code" href="client_8h.html#ab4756e8f48a7af991ab99e4e5894af52">create_default_filter</a>(&amp;def, ms, j);</div>
<div class="line">    <span class="keywordflow">if</span> (f) {</div>
<div class="line">      <span class="keywordflow">if</span> (prev == NULL) {</div>
<div class="line">        ms-&gt;firstFilter = f;</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        prev-&gt;<a class="code" href="structOmlFilter.html#a702d8421bfd416f22633b0cc470e1f3a">next</a> = f;</div>
<div class="line">      }</div>
<div class="line">      prev = f;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a>(<span class="stringliteral">&quot;Unable to create default filter for MP %s.\n&quot;</span>, mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aae69d5e89a47ef7b1324df2155bcfa8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlMStream.html">OmlMStream</a>* create_mstream </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td>
          <td class="paramname"><em>mp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structOmlWriter.html">OmlWriter</a> *&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sample_interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sample_thres</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new stream of measurement samples from the inputs to a given MP.</p>
<p>If a stream by that name already exists, it is used instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sample_interval</td><td>the sample interval for the filter </td></tr>
    <tr><td class="paramname">sample_thres</td><td>the threshold for the filter </td></tr>
    <tr><td class="paramname">mp</td><td>the measurement point </td></tr>
    <tr><td class="paramname">writer</td><td>the destination for the stream output samples </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the new measurement stream, or NULL if an error occurred. </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l00963">963</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="client_8h_source.html#l00036">OmlClient::app_name</a>, <a class="el" href="client_8h_source.html#l00080">OmlClient::client_instr</a>, <a class="el" href="init_8c_source.html#l00938">find_mstream()</a>, <a class="el" href="log_8c_source.html#l00333">logdebug()</a>, <a class="el" href="log_8c_source.html#l00297">logerror()</a>, <a class="el" href="log_8c_source.html#l00321">loginfo()</a>, <a class="el" href="check__liboml2__api_8c_source.html#l00141">mp</a>, <a class="el" href="omlc_8h_source.html#l00742">OmlMStream::mp</a>, <a class="el" href="mstring_8c_source.html#l00222">mstring_buf()</a>, <a class="el" href="mstring_8c_source.html#l00130">mstring_cat()</a>, <a class="el" href="mstring_8c_source.html#l00073">mstring_create()</a>, <a class="el" href="mstring_8c_source.html#l00237">mstring_delete()</a>, <a class="el" href="mstring_8c_source.html#l00100">mstring_set()</a>, <a class="el" href="omlc_8h_source.html#l00711">OmlMP::mutex</a>, <a class="el" href="omlc_8h_source.html#l00709">OmlMP::mutexP</a>, <a class="el" href="omlc_8h_source.html#l00691">OmlMP::name</a>, <a class="el" href="omlc_8h_source.html#l00776">OmlMStream::next</a>, <a class="el" href="mem_8c_source.html#l00240">oml_free()</a>, <a class="el" href="mem_8c_source.html#l00157">oml_malloc()</a>, <a class="el" href="init_8c_source.html#l01052">oml_ms_add_writer()</a>, <a class="el" href="omlc_8h_source.html#l00761">OmlMStream::sample_interval</a>, <a class="el" href="omlc_8h_source.html#l00758">OmlMStream::sample_thres</a>, <a class="el" href="omlc_8h_source.html#l00702">OmlMP::streams</a>, and <a class="el" href="omlc_8h_source.html#l00739">OmlMStream::table_name</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l01153">oml_mp_get_default_ms()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">char</span> *stream_name = NULL;</div>
<div class="line">  <span class="keywordtype">int</span> <span class="keyword">new</span> = 1;</div>
<div class="line">  <a class="code" href="structMString.html">MString</a> *namestr;</div>
<div class="line">  <a class="code" href="structOmlMStream.html">OmlMStream</a> *ms;</div>
<div class="line">  <span class="keywordflow">if</span> (!mp) {</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  namestr = <a class="code" href="mstring_8c.html#a49f0faf4fe4e38a6d7b4f0ef09d5fd24">mstring_create</a>();</div>
<div class="line">  <span class="comment">/* If name is not specified, create one by concatenating the application and</span></div>
<div class="line"><span class="comment">   * MP names.</span></div>
<div class="line"><span class="comment">   *</span></div>
<div class="line"><span class="comment">   * XXX: We probably should not do it for any MP, as an MP should be</span></div>
<div class="line"><span class="comment">   * application-agnostic. This is not the case at the moment, and we don&#39;t</span></div>
<div class="line"><span class="comment">   * want to confuse legacy post-processing scripts. See #1055.</span></div>
<div class="line"><span class="comment">   *</span></div>
<div class="line"><span class="comment">   * However, schema 0 is new, so let&#39;s do the right thing here.</span></div>
<div class="line"><span class="comment">   *</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line">  namestr = <a class="code" href="mstring_8c.html#a49f0faf4fe4e38a6d7b4f0ef09d5fd24">mstring_create</a>();</div>
<div class="line">  <span class="keywordflow">if</span> ((mp != <a class="code" href="api_8c.html#ab37d06b7aa57f34099a4dbcff29635b7">schema0</a>) &amp;&amp; (mp != <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a301a86e1b0438b15f455f15e56111677">client_instr</a>)) {</div>
<div class="line">    <a class="code" href="mstring_8c.html#a08be5969ab75ab7f40d4a767c8024df0">mstring_set</a> (namestr, <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a892c8aaacb821f1c3e90285ab97dce1b">app_name</a>);</div>
<div class="line">    <a class="code" href="mstring_8c.html#a7cd8889255be28437ebc23d31188ba69">mstring_cat</a> (namestr, <span class="stringliteral">&quot;_&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) {</div>
<div class="line">    <a class="code" href="mstring_8c.html#a7cd8889255be28437ebc23d31188ba69">mstring_cat</a> (namestr, <a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <a class="code" href="mstring_8c.html#a7cd8889255be28437ebc23d31188ba69">mstring_cat</a> (namestr, mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>);</div>
<div class="line">  }</div>
<div class="line">  stream_name = <a class="code" href="mstring_8c.html#ab18dbe1f8aa51964e0a15813991daf73">mstring_buf</a> (namestr);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> ((ms=<a class="code" href="client_8h.html#a17d38a142ff7946ea46d63b5e761ae63">find_mstream</a> (stream_name))) {</div>
<div class="line">    <a class="code" href="log_8c.html#aea4dca1a8e24794377ba1bf45fbbfce8">loginfo</a>(<span class="stringliteral">&quot;MS &#39;%s&#39; already exists, assuming identical parameters for a new destination; use the &#39;name&#39; attribute of the &lt;stream /&gt; element to change\n&quot;</span>, stream_name);</div>
<div class="line">    <span class="keyword">new</span> = 0;</div>
<div class="line"></div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a>(<span class="stringliteral">&quot;MS &#39;%s&#39; does not exist, creating...\n&quot;</span>, stream_name);</div>
<div class="line">    ms = (<a class="code" href="structOmlMStream.html">OmlMStream</a>*)<a class="code" href="omlc_8h.html#a8616cb714d6589098267bba8fc7b48c2">oml_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structOmlMStream.html">OmlMStream</a>));</div>
<div class="line">    <span class="keywordflow">if</span>(!ms) {</div>
<div class="line">      <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a>(<span class="stringliteral">&quot;Cannot allocate memory for MS %s\n&quot;</span>, <a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div>
<div class="line">      <span class="keywordflow">return</span> NULL;</div>
<div class="line">    }</div>
<div class="line">    memset(ms, 0, <span class="keyword">sizeof</span>(<a class="code" href="structOmlMStream.html">OmlMStream</a>));</div>
<div class="line"></div>
<div class="line">    ;</div>
<div class="line">    strncpy (ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>, stream_name, <span class="keyword">sizeof</span>(ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>));</div>
<div class="line">    ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>[<span class="keyword">sizeof</span>(ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>)-1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"></div>
<div class="line">    ms-&gt;<a class="code" href="structOmlMStream.html#abb765cd3168964526028974b5395bf5e">sample_interval</a> = sample_interval;</div>
<div class="line">    ms-&gt;<a class="code" href="structOmlMStream.html#a6dce39ba9a9266928eef2ce42849322e">sample_thres</a> = sample_thres;</div>
<div class="line">    ms-&gt;<a class="code" href="structOmlMStream.html#a3cc7303c0c6785623406ef871d16907d">mp</a> = <a class="code" href="check__liboml2__api_8c.html#a8f5ec90394e42efb227d03ce038b0377">mp</a>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (ms-&gt;<a class="code" href="structOmlMStream.html#abb765cd3168964526028974b5395bf5e">sample_interval</a> &gt; 0) {</div>
<div class="line">      <span class="keywordflow">if</span> (mp-&gt;<a class="code" href="structOmlMP.html#afc9867471701f954bc28caf255c3816b">mutexP</a> == NULL) {</div>
<div class="line">        mp-&gt;<a class="code" href="structOmlMP.html#afc9867471701f954bc28caf255c3816b">mutexP</a> = &amp;mp-&gt;<a class="code" href="structOmlMP.html#a220c5987f0145cd88c07866fb0ab950d">mutex</a>;</div>
<div class="line">        pthread_mutex_init(mp-&gt;<a class="code" href="structOmlMP.html#afc9867471701f954bc28caf255c3816b">mutexP</a>, NULL);</div>
<div class="line">      }</div>
<div class="line">      ms-&gt;<a class="code" href="structOmlMStream.html#a6dce39ba9a9266928eef2ce42849322e">sample_thres</a> = 0;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="mstring_8c.html#a22eb366ee3317407b4233d6216b690a3">mstring_delete</a> (namestr);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(!writer) {</div>
<div class="line">    <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a>(<span class="stringliteral">&quot;NULL writer for MS %s; it might get added later (using a configuration file?)\n&quot;</span>, <a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>?<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>:mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>);</div>
<div class="line"></div>
<div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="client_8h.html#a94accc8192536cbda920a4f3adf26c34">oml_ms_add_writer</a>(ms, writer))  {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a>(<span class="stringliteral">&quot;Cannot add %s&#39;s writer\n&quot;</span>, <a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div>
<div class="line">    <span class="keywordflow">if</span>(<span class="keyword">new</span>) {</div>
<div class="line">      <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a>(ms);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<span class="keyword">new</span>) {</div>
<div class="line">    ms-&gt;<a class="code" href="structOmlMStream.html#a3dcd5e7eeb74525f3a003b08eed87e12">next</a> = mp-&gt;<a class="code" href="structOmlMP.html#a0053c119979daf6d558c414b685e17f5">streams</a>;</div>
<div class="line">    mp-&gt;<a class="code" href="structOmlMP.html#a0053c119979daf6d558c414b685e17f5">streams</a> = ms;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> ms;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac821f21a0da9c8aae8be1cac73331166"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlMP.html">OmlMP</a>* destroy_mp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy MP</p>
<p>This function is designed so it can be used in a while loop to clean up the entire linked list:</p>
<p>while( (mp=destroy_mp(mp)) );</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mp</td><td>pointer to the <a class="el" href="structOmlMP.html">OmlMP</a> to free </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mp-&gt;next (can be NULL) </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l00493">493</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="omlc_8h_source.html#l00706">OmlMP::active</a>, <a class="el" href="init_8c_source.html#l01088">destroy_ms()</a>, <a class="el" href="init_8c_source.html#l00321">destroy_sem_concepts()</a>, <a class="el" href="log_8c_source.html#l00333">logdebug()</a>, <a class="el" href="misc_8c_source.html#l00030">mp_lock()</a>, <a class="el" href="misc_8c_source.html#l00040">mp_unlock()</a>, <a class="el" href="omlc_8h_source.html#l00691">OmlMP::name</a>, <a class="el" href="omlc_8h_source.html#l00714">OmlMP::next</a>, <a class="el" href="omlc_8h_source.html#l00694">OmlMP::param_defs</a>, <a class="el" href="omlc_8h_source.html#l00674">OmlMPDef::relations</a>, and <a class="el" href="omlc_8h_source.html#l00702">OmlMP::streams</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00637">omlc_close()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structOmlMP.html">OmlMP</a> *next;</div>
<div class="line">  <a class="code" href="structOmlMStream.html">OmlMStream</a> *ms;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(!mp) {</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a>(<span class="stringliteral">&quot;Destroying MP %s at %p\n&quot;</span>, mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>, mp);</div>
<div class="line"></div>
<div class="line">  next = mp-&gt;<a class="code" href="structOmlMP.html#afc2a31e64cd23aeb0878b87acb8ef577">next</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="code" href="client_8h.html#aa1f46a06d6e6693cba8548a3cc4048e8">mp_lock</a>(mp)) {</div>
<div class="line">    mp-&gt;<a class="code" href="structOmlMP.html#a953097bd43715d18d3cc10b47d14d03c">active</a> = 0;</div>
<div class="line">    ms = mp-&gt;<a class="code" href="structOmlMP.html#a0053c119979daf6d558c414b685e17f5">streams</a>;</div>
<div class="line">    <span class="keywordflow">while</span> (<a class="code" href="init_8c.html#a50aae756ce043a9b74775a48c13aba0c">destroy_sem_concepts</a>(mp-&gt;<a class="code" href="structOmlMP.html#a8269442d91a3e59d2e26b254eb232d3e">param_defs</a>-&gt;<a class="code" href="structOmlMPDef.html#a16cc14202a8d12ac8929b7889ea34d1d">relations</a>));</div>
<div class="line">    <span class="keywordflow">while</span>( (ms=<a class="code" href="client_8h.html#a96b21fffa7aa1578b2a2a163422cfffe">destroy_ms</a>(ms)) );</div>
<div class="line">    <a class="code" href="client_8h.html#ae9551b52d060a0d9cf2aa2c01f5f5d12">mp_unlock</a>(mp);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> next;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a96b21fffa7aa1578b2a2a163422cfffe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlMStream.html">OmlMStream</a>* destroy_ms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy a Measurement Stream, and deep free allocated memory (filters.</p>
<p>This function is designed so it can be used in a while loop to clean up the entire linked list:</p>
<p>while( (ms=destroy_ms(ms)) );</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>pointer to the <a class="el" href="structOmlMStream.html">OmlMStream</a> to free </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ms-&gt;next (can be NULL) </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l01088">1088</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="factory_8c_source.html#l00139">destroy_filter()</a>, <a class="el" href="filter_8c_source.html#l00103">filter_process()</a>, <a class="el" href="omlc_8h_source.html#l00749">OmlMStream::filters</a>, <a class="el" href="log_8c_source.html#l00333">logdebug()</a>, <a class="el" href="log_8c_source.html#l00321">loginfo()</a>, <a class="el" href="omlc_8h_source.html#l00776">OmlMStream::next</a>, <a class="el" href="mem_8c_source.html#l00240">oml_free()</a>, <a class="el" href="omlc_8h_source.html#l00756">OmlMStream::sample_size</a>, <a class="el" href="omlc_8h_source.html#l00739">OmlMStream::table_name</a>, and <a class="el" href="omlc_8h_source.html#l00782">OmlMStream::writers</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00493">destroy_mp()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structOmlMStream.html">OmlMStream</a> *next;</div>
<div class="line">  <a class="code" href="structOmlFilter.html">OmlFilter</a> *ft;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(!ms) {</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a>(<span class="stringliteral">&quot;Destroying MS %s at %p\n&quot;</span>, ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>, ms);</div>
<div class="line"></div>
<div class="line">  next = ms-&gt;<a class="code" href="structOmlMStream.html#a3dcd5e7eeb74525f3a003b08eed87e12">next</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (ms-&gt;<a class="code" href="structOmlMStream.html#ada9e11ba6d89e2cca0787a65fb2b2c9d">sample_size</a> &gt; 0) {</div>
<div class="line">    <a class="code" href="log_8c.html#aea4dca1a8e24794377ba1bf45fbbfce8">loginfo</a>(<span class="stringliteral">&quot;Reporting last (partial) sample for MS %s\n&quot;</span>, ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>);</div>
<div class="line">    <a class="code" href="client_8h.html#a2bb910d0f3c68f70719113b1920e6931">filter_process</a>(ms);</div>
<div class="line">  }</div>
<div class="line">  ft = ms-&gt;<a class="code" href="structOmlMStream.html#a5b929155b553fd221a655734c82d10ac">filters</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span>( (ft = <a class="code" href="factory_8c.html#a303f4a129a49ffbb81955717333f7d20">destroy_filter</a>(ft)) );</div>
<div class="line"></div>
<div class="line">  <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a>(ms-&gt;<a class="code" href="structOmlMStream.html#ad436c40e7e14ae11cde0361871a7eabd">writers</a>);</div>
<div class="line">  <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a>(ms);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> next;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3c464de2b06ba5aec1a33ffee964dfa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int file_stream_get_buffered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlOutStream.html">OmlOutStream</a> *&#160;</td>
          <td class="paramname"><em>hdl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ul>
<li>Get the buffering startegy of an <a class="el" href="structOmlOutStream.html">OmlOutStream</a></li>
</ul>
<p>Returns 0 if fflush(3) is used after each write, 1 otherwise.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdl</td><td>the <a class="el" href="structOmlOutStream.html">OmlOutStream</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if unbuffered, 1 if buffered, -1 on failure (hdl was NULL) </dd></dl>

<p>Definition at line <a class="el" href="file__stream_8c_source.html#l00190">190</a> of file <a class="el" href="file__stream_8c_source.html">file_stream.c</a>.</p>

<p>References <a class="el" href="oml__out__stream_8h_source.html#l00053">OmlOutStream::write</a>.</p>

<p>Referenced by <a class="el" href="check__liboml2__writers_8c_source.html#l00065">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structOmlFileOutStream.html">OmlFileOutStream</a>* <span class="keyword">self</span> = (<a class="code" href="structOmlFileOutStream.html">OmlFileOutStream</a>*)hdl;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<span class="keyword">self</span> == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> (hdl-&gt;<a class="code" href="structOmlOutStream.html#a18f389f82a68d9eaad2c02341977a5f3">write</a>==file_stream_write);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac7dd4a100ddaba640ad0f3f19af7ae06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlOutStream.html">OmlOutStream</a>* file_stream_new </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new out stream for writing into a local file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>destination file (<a class="el" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup()</a>'d locally) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new <a class="el" href="structOmlOutStream.html">OmlOutStream</a> instance</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mem_8h.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup</a> </dd></dl>

<p>Definition at line <a class="el" href="file__stream_8c_source.html#l00059">59</a> of file <a class="el" href="file__stream_8c_source.html">file_stream.c</a>.</p>

<p>References <a class="el" href="log_8c_source.html#l00297">logerror()</a>, <a class="el" href="log_8c_source.html#l00321">loginfo()</a>, <a class="el" href="mem_8c_source.html#l00157">oml_malloc()</a>, and <a class="el" href="mem_8c_source.html#l00288">oml_strndup()</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00741">create_writer()</a>, and <a class="el" href="check__liboml2__writers_8c_source.html#l00065">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structOmlFileOutStream.html">OmlFileOutStream</a>* <span class="keyword">self</span> = (<a class="code" href="structOmlFileOutStream.html">OmlFileOutStream</a> *)<a class="code" href="omlc_8h.html#a8616cb714d6589098267bba8fc7b48c2">oml_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structOmlFileOutStream.html">OmlFileOutStream</a>));</div>
<div class="line">  memset(<span class="keyword">self</span>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structOmlFileOutStream.html">OmlFileOutStream</a>));</div>
<div class="line"></div>
<div class="line">  <a class="code" href="log_8c.html#aea4dca1a8e24794377ba1bf45fbbfce8">loginfo</a> (<span class="stringliteral">&quot;File_stream: opening local storage file &#39;%s&#39;\n&quot;</span>, file);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (strcmp(file, <span class="stringliteral">&quot;stdout&quot;</span>) == 0 || strcmp(file, <span class="stringliteral">&quot;-&quot;</span>) == 0) {</div>
<div class="line">    <span class="keyword">self</span>-&gt;f = stdout;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">if</span> ((self-&gt;f = fopen(file, <span class="stringliteral">&quot;a+&quot;</span>)) == NULL) {</div>
<div class="line">      <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a> (<span class="stringliteral">&quot;Can&#39;t open local storage file &#39;%s&#39;\n&quot;</span>, file);</div>
<div class="line">      <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>-&gt;write = file_stream_write;</div>
<div class="line">  <span class="keyword">self</span>-&gt;close = file_stream_close;</div>
<div class="line">  <span class="keyword">self</span>-&gt;dest = (<span class="keywordtype">char</span>*)<a class="code" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup</a> (file, strlen (file));</div>
<div class="line">  <span class="keyword">self</span>-&gt;header_written = 0;</div>
<div class="line">  <span class="keywordflow">return</span> (<a class="code" href="structOmlOutStream.html">OmlOutStream</a>*)<span class="keyword">self</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7e29655c822b05e3ebe7daf7308024e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int file_stream_set_buffered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlOutStream.html">OmlOutStream</a> *&#160;</td>
          <td class="paramname"><em>hdl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buffered</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ul>
<li>Set the buffering startegy of an <a class="el" href="structOmlOutStream.html">OmlOutStream</a></li>
</ul>
<p>Tell whether fflush(3) should be used after each write.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hdl</td><td>the <a class="el" href="structOmlOutStream.html">OmlOutStream</a> </td></tr>
    <tr><td class="paramname">buffered</td><td>if 0, unbuffered operation is used, otherwise buffered operation is </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure (+hdl+ was NULL) </dd></dl>

<p>Definition at line <a class="el" href="file__stream_8c_source.html#l00168">168</a> of file <a class="el" href="file__stream_8c_source.html">file_stream.c</a>.</p>

<p>References <a class="el" href="file__stream_8c_source.html#l00145">file_stream_write_flush()</a>, and <a class="el" href="oml__out__stream_8h_source.html#l00053">OmlOutStream::write</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00741">create_writer()</a>, and <a class="el" href="check__liboml2__writers_8c_source.html#l00065">START_TEST()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structOmlFileOutStream.html">OmlFileOutStream</a>* <span class="keyword">self</span> = (<a class="code" href="structOmlFileOutStream.html">OmlFileOutStream</a>*)hdl;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<span class="keyword">self</span> == NULL) <span class="keywordflow">return</span> -1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(buffered)</div>
<div class="line">    hdl-&gt;<a class="code" href="structOmlOutStream.html#a18f389f82a68d9eaad2c02341977a5f3">write</a>=file_stream_write;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    hdl-&gt;<a class="code" href="structOmlOutStream.html#a18f389f82a68d9eaad2c02341977a5f3">write</a>=<a class="code" href="file__stream_8c.html#a743a8ec0b30478ea9c2078da7237a098">file_stream_write_flush</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1740a7e71f0ae4e436464805e071c37e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filter_engine_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start the filtering engine on the given MS </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>pointer to <a class="el" href="structOmlMStream.html">OmlMStream</a> to start filtering on </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="filter_8c_source.html#l00050">50</a> of file <a class="el" href="filter_8c_source.html">filter.c</a>.</p>

<p>References <a class="el" href="omlc_8h_source.html#l00769">OmlMStream::filter_thread</a>, <a class="el" href="log_8c_source.html#l00333">logdebug()</a>, and <a class="el" href="omlc_8h_source.html#l00739">OmlMStream::table_name</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l01153">oml_mp_get_default_ms()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a> (<span class="stringliteral">&quot;Starting filtering thread for MS &#39;%s&#39;\n&quot;</span>, ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>);</div>
<div class="line">  pthread_create(&amp;ms-&gt;<a class="code" href="structOmlMStream.html#a254042fcbc6a171ef015966cc6d4fe5c">filter_thread</a>, NULL, thread_start, (<span class="keywordtype">void</span>*)ms);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2bb910d0f3c68f70719113b1920e6931"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int filter_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run filters associated to an MS.</p>
<p>Get the writer associated to the MS, and generate and write initial metadata (seqno and time). Then, instruct all the filters, in sequence, to write their filtered sample to this writer before finalising the write.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>MS to generate output for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success, -1 otherwise</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="structOmlWriter.html">OmlWriter</a>, <a class="el" href="oml__writer_8h.html#a41b081311eb21b4b76a31ae86a66dfe8">oml_writer_row_start</a>, <a class="el" href="oml__writer_8h.html#a43b4f370f713129f2c4abb9311e20b52">oml_writer_out</a>, <a class="el" href="oml__writer_8h.html#ada67a09a0370a5eb8be837a3be7b4293">oml_writer_row_end</a> </dd></dl>

<p>Definition at line <a class="el" href="filter_8c_source.html#l00103">103</a> of file <a class="el" href="filter_8c_source.html">filter.c</a>.</p>

<p>References <a class="el" href="omlc_8h_source.html#l00790">OmlMStream::dropped</a>, <a class="el" href="log_8c_source.html#l00297">logerror()</a>, <a class="el" href="log_8c_source.html#l00309">logwarn()</a>, <a class="el" href="oml__filter_8h_source.html#l00146">OmlFilter::newwindow</a>, <a class="el" href="oml__filter_8h_source.html#l00143">OmlFilter::next</a>, <a class="el" href="omlc_8h_source.html#l00784">OmlMStream::nwriters</a>, <a class="el" href="oml__filter_8h_source.html#l00121">OmlFilter::output</a>, <a class="el" href="oml__writer_8h_source.html#l00108">OmlWriter::row_end</a>, <a class="el" href="oml__writer_8h_source.html#l00106">OmlWriter::row_start</a>, <a class="el" href="omlc_8h_source.html#l00756">OmlMStream::sample_size</a>, <a class="el" href="omlc_8h_source.html#l00764">OmlMStream::seq_no</a>, <a class="el" href="client_8h_source.html#l00057">OmlClient::start_time</a>, <a class="el" href="omlc_8h_source.html#l00739">OmlMStream::table_name</a>, <a class="el" href="omlc_8h_source.html#l00782">OmlMStream::writers</a>, and <a class="el" href="omlc_8h_source.html#l00787">OmlMStream::written</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l01088">destroy_ms()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keyword">struct </span>timeval tv;</div>
<div class="line">  <span class="keywordtype">double</span> now;</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line">  <a class="code" href="structOmlFilter.html">OmlFilter</a> *f;</div>
<div class="line">  <a class="code" href="structOmlWriter.html">OmlWriter</a> *writer;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Get the time as soon as possible */</span></div>
<div class="line">  gettimeofday(&amp;tv, NULL);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (ms == NULL || <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a> == NULL || ms-&gt;<a class="code" href="structOmlMStream.html#ad436c40e7e14ae11cde0361871a7eabd">writers</a> == NULL) {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a>(<span class="stringliteral">&quot;Could not process filters because of null measurement stream, instance or writers array\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  now = tv.tv_sec - <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a89d86ad01212dc1bcde47399d890fa2e">start_time</a> + 0.000001 * tv.tv_usec;</div>
<div class="line">  ms-&gt;<a class="code" href="structOmlMStream.html#acfa303e0a07d706a78729571ac32b9d9">seq_no</a>++;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (i=0; i&lt;ms-&gt;<a class="code" href="structOmlMStream.html#a98172393f791aba57e2431a97f332ba2">nwriters</a>; i++) {</div>
<div class="line">    writer = ms-&gt;<a class="code" href="structOmlMStream.html#ad436c40e7e14ae11cde0361871a7eabd">writers</a>[i];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (writer == NULL) {</div>
<div class="line">      <a class="code" href="log_8c.html#ac65b3f90d3228474368b2b48a488cd44">logwarn</a>(<span class="stringliteral">&quot;%s: Sending data NULL writer (at %d)\n&quot;</span>, ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>, i);</div>
<div class="line"></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="comment">/* Be aware that row_start is obtaining a lock on the writer</span></div>
<div class="line"><span class="comment">       * which is released in row_end. Always ensure that row_end is</span></div>
<div class="line"><span class="comment">       * called, even if there is a problem somewhere along the way.</span></div>
<div class="line"><span class="comment">       * \see oml_writer_row_start, oml_writer_out, oml_writer_row_end</span></div>
<div class="line"><span class="comment">       */</span></div>
<div class="line">      <span class="keywordflow">if</span>(writer-&gt;<a class="code" href="structOmlWriter.html#af7b417adb595f8e5d46112640825f6ea">row_start</a>(writer, ms, now) == 1)</div>
<div class="line">        ms-&gt;<a class="code" href="structOmlMStream.html#ae4727d93738998bab105ab7517ce55af">written</a>++;</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">        ms-&gt;<a class="code" href="structOmlMStream.html#a4f5c723592bdb37e866fe008e736604b">dropped</a>++;</div>
<div class="line"></div>
<div class="line">      f = ms-&gt;firstFilter;</div>
<div class="line">      for (; f != NULL; f = f-&gt;<a class="code" href="structOmlFilter.html#a702d8421bfd416f22633b0cc470e1f3a">next</a>) {</div>
<div class="line">        f-&gt;<a class="code" href="structOmlFilter.html#ab9dc92b278133b3245fcd6b2a6d9af13">output</a>(f, writer);</div>
<div class="line">      }</div>
<div class="line">      writer-&gt;<a class="code" href="structOmlWriter.html#a981ccb2404200aece3ea6574386ccf67">row_end</a>(writer, ms);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  f = ms-&gt;firstFilter;</div>
<div class="line">  <span class="keywordflow">for</span> (; f != NULL; f = f-&gt;<a class="code" href="structOmlFilter.html#a702d8421bfd416f22633b0cc470e1f3a">next</a>) {</div>
<div class="line">    f-&gt;<a class="code" href="structOmlFilter.html#ac40bc61108b29179955ea7393b85a78a">newwindow</a>(f);</div>
<div class="line">  }</div>
<div class="line">  ms-&gt;<a class="code" href="structOmlMStream.html#ada9e11ba6d89e2cca0787a65fb2b2c9d">sample_size</a> = 0;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2b7b282aa3dee35bbc5656e9ce5204c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlMP.html">OmlMP</a>* find_mp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find a named measurement point.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the measurement point to search for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the measurement point, or NULL if not found. </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l00850">850</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="check__liboml2__api_8c_source.html#l00141">mp</a>, <a class="el" href="client_8h_source.html#l00043">OmlClient::mpoints</a>, <a class="el" href="omlc_8h_source.html#l00691">OmlMP::name</a>, and <a class="el" href="omlc_8h_source.html#l00714">OmlMP::next</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structOmlMP.html">OmlMP</a> *<a class="code" href="structmp.html">mp</a> = <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a4050599cbe022fe59c5308d7bc8b33fb">mpoints</a>;</div>
<div class="line">  <span class="keywordflow">while</span> (mp &amp;&amp; strcmp (<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>))</div>
<div class="line">    mp = mp-&gt;<a class="code" href="structOmlMP.html#afc2a31e64cd23aeb0878b87acb8ef577">next</a>;</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="check__liboml2__api_8c.html#a8f5ec90394e42efb227d03ce038b0377">mp</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adb0da318e59f1e48cbef3255e272ebdf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int find_mp_field </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td>
          <td class="paramname"><em>mp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>a named field of an MP. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of the field to look up </td></tr>
    <tr><td class="paramname">mp</td><td><a class="el" href="structOmlMP.html">OmlMP</a> to look for the field</td></tr>
  </table>
  </dd>
</dl>
<p>If either parameter is NULL, act as if the field wasn't found.</p>
<dl class="section return"><dt>Returns</dt><dd>a valid index into the <a class="el" href="structOmlMP.html">OmlMP</a>'s param_defs array, or -1 if not found </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l00867">867</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="log_8c_source.html#l00333">logdebug()</a>, <a class="el" href="omlc_8h_source.html#l00668">OmlMPDef::name</a>, <a class="el" href="omlc_8h_source.html#l00691">OmlMP::name</a>, <a class="el" href="omlc_8h_source.html#l00696">OmlMP::param_count</a>, and <a class="el" href="omlc_8h_source.html#l00694">OmlMP::param_defs</a>.</p>

<p>Referenced by <a class="el" href="api_8c_source.html#l00218">omlc_inject_metadata()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">size_t</span> i;</div>
<div class="line">  <span class="keywordflow">if</span> (NULL == <a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> || NULL == mp) { <span class="keywordflow">return</span> -1; }</div>
<div class="line">  <span class="keywordtype">size_t</span> len = mp-&gt;<a class="code" href="structOmlMP.html#a15a16f8336c4ddb062432f391f40a302">param_count</a>;</div>
<div class="line">  <a class="code" href="structOmlMPDef.html">OmlMPDef</a> *fields = mp-&gt;<a class="code" href="structOmlMP.html#a8269442d91a3e59d2e26b254eb232d3e">param_defs</a>;</div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; len; i++) {</div>
<div class="line">    <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a>(<span class="stringliteral">&quot;Searching MP %s for field &#39;%s&#39;, found &#39;%s&#39;\n&quot;</span>,</div>
<div class="line">        mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>, <a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, fields[i].<a class="code" href="structOmlMPDef.html#a4d058714a8007ca1a7cccc6b35aebdd1">name</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp (<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, fields[i].<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) == 0) {</div>
<div class="line">      <span class="keywordflow">return</span> i;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a17d38a142ff7946ea46d63b5e761ae63"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlMStream.html">OmlMStream</a>* find_mstream </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find a measurement stream by name. All measurement streams must be named uniquely.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the measurement stream to search for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the measurement stream or NULL if not found. </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l00938">938</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="init_8c_source.html#l00915">find_mstream_in_mp()</a>, <a class="el" href="client_8h_source.html#l00043">OmlClient::mpoints</a>, and <a class="el" href="omlc_8h_source.html#l00714">OmlMP::next</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00963">create_mstream()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structOmlMP.html">OmlMP</a> *<a class="code" href="structmp.html">mp</a> = <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a4050599cbe022fe59c5308d7bc8b33fb">mpoints</a>;</div>
<div class="line">  <a class="code" href="structOmlMStream.html">OmlMStream</a> *ms = NULL;</div>
<div class="line">  <span class="keywordflow">while</span> (mp) {</div>
<div class="line">    ms = <a class="code" href="client_8h.html#aceaf7c6f990869cc30bb729f2addf5e7">find_mstream_in_mp</a> (<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, mp);</div>
<div class="line">    <span class="keywordflow">if</span> (ms)</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    mp = mp-&gt;<a class="code" href="structOmlMP.html#afc2a31e64cd23aeb0878b87acb8ef577">next</a>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> ms;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aceaf7c6f990869cc30bb729f2addf5e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlMStream.html">OmlMStream</a>* find_mstream_in_mp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td>
          <td class="paramname"><em>mp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Find a named MStream among the streams attached to an MP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of the stream to search for </td></tr>
    <tr><td class="paramname">mp</td><td>MP in which to search for the stream </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the <a class="el" href="structOmlMStream.html">OmlMStream</a> if found, or NULL if not (or name is NULL) </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l00915">915</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="omlc_8h_source.html#l00776">OmlMStream::next</a>, <a class="el" href="omlc_8h_source.html#l00702">OmlMP::streams</a>, and <a class="el" href="omlc_8h_source.html#l00739">OmlMStream::table_name</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00938">find_mstream()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structOmlMStream.html">OmlMStream</a> *ms = mp-&gt;<a class="code" href="structOmlMP.html#a0053c119979daf6d558c414b685e17f5">streams</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span> (ms) {</div>
<div class="line">    <span class="keywordflow">if</span> (ms &amp;&amp; ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a> &amp;&amp; strcmp (<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>) == 0)</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    ms = ms-&gt;<a class="code" href="structOmlMStream.html#a3dcd5e7eeb74525f3a003b08eed87e12">next</a>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ms;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9702786aa9c44bc70b9525025de8740a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMString.html">MString</a>* mp_fields_summary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create an <a class="el" href="structMString.html">MString</a> containing a comma-separated list of the fields of the MP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mp</td><td><a class="el" href="structOmlMP.html">OmlMP</a> to summarize </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the fields summary for mp. The caller is repsonsible for calling <a class="el" href="mstring_8c.html#a22eb366ee3317407b4233d6216b690a3">mstring_delete()</a> to deallocate the returned <a class="el" href="structMString.html">MString</a>. </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l00889">889</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="mstring_8c_source.html#l00130">mstring_cat()</a>, <a class="el" href="mstring_8c_source.html#l00073">mstring_create()</a>, <a class="el" href="mstring_8c_source.html#l00100">mstring_set()</a>, <a class="el" href="init_8c_source.html#l01493">name</a>, <a class="el" href="omlc_8h_source.html#l00696">OmlMP::param_count</a>, and <a class="el" href="omlc_8h_source.html#l00694">OmlMP::param_defs</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line">  <a class="code" href="structOmlMPDef.html">OmlMPDef</a> *fields = mp-&gt;<a class="code" href="structOmlMP.html#a8269442d91a3e59d2e26b254eb232d3e">param_defs</a>;</div>
<div class="line">  <a class="code" href="structMString.html">MString</a> *s = <a class="code" href="mstring_8c.html#a49f0faf4fe4e38a6d7b4f0ef09d5fd24">mstring_create</a>();</div>
<div class="line">  <a class="code" href="mstring_8c.html#a08be5969ab75ab7f40d4a767c8024df0">mstring_set</a> (s, <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!s) <span class="keywordflow">return</span> NULL;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; mp-&gt;<a class="code" href="structOmlMP.html#a15a16f8336c4ddb062432f391f40a302">param_count</a>; i++) {</div>
<div class="line">    <a class="code" href="mstring_8c.html#a7cd8889255be28437ebc23d31188ba69">mstring_cat</a> (s, fields[i].<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (i &lt; mp-&gt;param_count - 1)</div>
<div class="line">      <a class="code" href="mstring_8c.html#a7cd8889255be28437ebc23d31188ba69">mstring_cat</a> (s, <span class="stringliteral">&quot;&#39;, &#39;&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="mstring_8c.html#a7cd8889255be28437ebc23d31188ba69">mstring_cat</a> (s, <span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> s;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa1f46a06d6e6693cba8548a3cc4048e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mp_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lock a measurement point mutex </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mp</td><td><a class="el" href="structOmlMP.html">OmlMP</a> to lock </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, -1 otherwise </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="misc_8c.html#ae9551b52d060a0d9cf2aa2c01f5f5d12">mp_unlock</a>, <a class="el" href="misc_8c.html#a861bb71000024af9ccc3f6b5fe9a9e43">oml_lock</a> </dd></dl>

<p>Definition at line <a class="el" href="misc_8c_source.html#l00030">30</a> of file <a class="el" href="misc_8c_source.html">misc.c</a>.</p>

<p>References <a class="el" href="omlc_8h_source.html#l00709">OmlMP::mutexP</a>, <a class="el" href="omlc_8h_source.html#l00691">OmlMP::name</a>, and <a class="el" href="misc_8c_source.html#l00052">oml_lock()</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00493">destroy_mp()</a>, and <a class="el" href="api_8c_source.html#l00149">omlc_inject()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="client_8h.html#a861bb71000024af9ccc3f6b5fe9a9e43">oml_lock</a>(mp-&gt;<a class="code" href="structOmlMP.html#afc9867471701f954bc28caf255c3816b">mutexP</a>, mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae9551b52d060a0d9cf2aa2c01f5f5d12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mp_unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unlock a measurement point mutex </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mp</td><td><a class="el" href="structOmlMP.html">OmlMP</a> to unlock </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="misc_8c.html#aa1f46a06d6e6693cba8548a3cc4048e8">mp_lock</a>, <a class="el" href="misc_8c.html#ab63adbadcb0c3da575b790cfebfe99b3">oml_unlock</a> </dd></dl>

<p>Definition at line <a class="el" href="misc_8c_source.html#l00040">40</a> of file <a class="el" href="misc_8c_source.html">misc.c</a>.</p>

<p>References <a class="el" href="omlc_8h_source.html#l00709">OmlMP::mutexP</a>, <a class="el" href="omlc_8h_source.html#l00691">OmlMP::name</a>, and <a class="el" href="misc_8c_source.html#l00070">oml_unlock()</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00493">destroy_mp()</a>, and <a class="el" href="api_8c_source.html#l00149">omlc_inject()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="client_8h.html#ab63adbadcb0c3da575b790cfebfe99b3">oml_unlock</a>(mp-&gt;<a class="code" href="structOmlMP.html#afc9867471701f954bc28caf255c3816b">mutexP</a>, mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af08fdd1497353e7fe6820aa5e1f765e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlOutStream.html">OmlOutStream</a>* net_stream_new </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>transport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>hostname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>service</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new out stream for sending over the network </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transport</td><td>string representing the protocol used to establish the connection (<a class="el" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup()</a>'d locally) </td></tr>
    <tr><td class="paramname">hostname</td><td>string representing the host to connect to (<a class="el" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup()</a>'d locally) </td></tr>
    <tr><td class="paramname">service</td><td>symbolic name or port number of the service to connect to (<a class="el" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup()</a>'d locally) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new <a class="el" href="structOmlOutStream.html">OmlOutStream</a> instance</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mem_8h.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup</a> </dd></dl>

<p>Definition at line <a class="el" href="net__stream_8c_source.html#l00080">80</a> of file <a class="el" href="net__stream_8c_source.html">net_stream.c</a>.</p>

<p>References <a class="el" href="log_8c_source.html#l00333">logdebug()</a>, <a class="el" href="mstring_8c_source.html#l00222">mstring_buf()</a>, <a class="el" href="mstring_8c_source.html#l00073">mstring_create()</a>, <a class="el" href="mstring_8c_source.html#l00237">mstring_delete()</a>, <a class="el" href="mstring_8c_source.html#l00207">mstring_len()</a>, <a class="el" href="mstring_8c_source.html#l00160">mstring_sprintf()</a>, <a class="el" href="mem_8c_source.html#l00157">oml_malloc()</a>, <a class="el" href="mem_8c_source.html#l00288">oml_strndup()</a>, and <a class="el" href="socket_8c_source.html#l00092">socket_set_non_blocking_mode()</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00741">create_writer()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="structMString.html">MString</a> *dest;</div>
<div class="line">  assert(transport != NULL &amp;&amp; hostname != NULL &amp;&amp; service != NULL);</div>
<div class="line">  <a class="code" href="structOmlNetOutStream.html">OmlNetOutStream</a>* <span class="keyword">self</span> = (<a class="code" href="structOmlNetOutStream.html">OmlNetOutStream</a> *)<a class="code" href="omlc_8h.html#a8616cb714d6589098267bba8fc7b48c2">oml_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structOmlNetOutStream.html">OmlNetOutStream</a>));</div>
<div class="line">  memset(<span class="keyword">self</span>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structOmlNetOutStream.html">OmlNetOutStream</a>));</div>
<div class="line"></div>
<div class="line">  dest = <a class="code" href="mstring_8c.html#a49f0faf4fe4e38a6d7b4f0ef09d5fd24">mstring_create</a>();</div>
<div class="line">  <a class="code" href="mstring_8c.html#ad28234c6cddf0af9ad2c538885e70ebf">mstring_sprintf</a>(dest, <span class="stringliteral">&quot;%s:%s:%s&quot;</span>, transport, hostname, service);</div>
<div class="line">  <span class="keyword">self</span>-&gt;dest = (<span class="keywordtype">char</span>*)<a class="code" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup</a> (<a class="code" href="mstring_8c.html#ab18dbe1f8aa51964e0a15813991daf73">mstring_buf</a>(dest), <a class="code" href="mstring_8c.html#a6bc6927925b35da8cb08e84fb406619f">mstring_len</a>(dest));</div>
<div class="line">  <a class="code" href="mstring_8c.html#a22eb366ee3317407b4233d6216b690a3">mstring_delete</a>(dest);</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>-&gt;protocol = (<span class="keywordtype">char</span>*)<a class="code" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup</a> (transport, strlen (transport));</div>
<div class="line">  <span class="keyword">self</span>-&gt;host = (<span class="keywordtype">char</span>*)<a class="code" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup</a> (hostname, strlen (hostname));</div>
<div class="line">  <span class="keyword">self</span>-&gt;service = (<span class="keywordtype">char</span>*)<a class="code" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup</a> (service, strlen (service));</div>
<div class="line"></div>
<div class="line">  <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a>(<span class="stringliteral">&quot;%s: Created OmlNetOutStream\n&quot;</span>, self-&gt;dest);</div>
<div class="line">  <a class="code" href="o__socket_8h.html#adac2005542e88cb32988ad200a07efbe">socket_set_non_blocking_mode</a>(0);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* // Now see if we can connect to server */</span></div>
<div class="line">  <span class="comment">/* if (! open_socket(self)) { */</span></div>
<div class="line">  <span class="comment">/*   free(self); */</span></div>
<div class="line">  <span class="comment">/*   return NULL; */</span></div>
<div class="line">  <span class="comment">/* } */</span></div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>-&gt;write = net_stream_write;</div>
<div class="line">  <span class="keyword">self</span>-&gt;close = net_stream_close;</div>
<div class="line">  <span class="keywordflow">return</span> (<a class="code" href="structOmlOutStream.html">OmlOutStream</a>*)<span class="keyword">self</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a861bb71000024af9ccc3f6b5fe9a9e43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int oml_lock </td>
          <td>(</td>
          <td class="paramtype">pthread_mutex_t *&#160;</td>
          <td class="paramname"><em>mutexP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mutexName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lock a mutex </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutexP</td><td>pointer to mutex lock </td></tr>
    <tr><td class="paramname">mutexName</td><td>name of mutex; used for error reporting only </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, -1 otherwise </dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="misc_8c.html#ab63adbadcb0c3da575b790cfebfe99b3">oml_unlock</a> </dd></dl>

<p>Definition at line <a class="el" href="misc_8c_source.html#l00052">52</a> of file <a class="el" href="misc_8c_source.html">misc.c</a>.</p>

<p>References <a class="el" href="log_8c_source.html#l00309">logwarn()</a>.</p>

<p>Referenced by <a class="el" href="buffered__writer_8c_source.html#l00165">bw_close()</a>, <a class="el" href="buffered__writer_8c_source.html#l00365">bw_get_write_buf()</a>, <a class="el" href="buffered__writer_8c_source.html#l00211">bw_push()</a>, <a class="el" href="buffered__writer_8c_source.html#l00266">bw_push_meta()</a>, <a class="el" href="misc_8c_source.html#l00030">mp_lock()</a>, and <a class="el" href="misc_8c_source.html#l00086">oml_lock_persistent()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mutexP) {</div>
<div class="line">    <span class="keywordflow">if</span> (pthread_mutex_lock(mutexP)) {</div>
<div class="line">      <a class="code" href="log_8c.html#ac65b3f90d3228474368b2b48a488cd44">logwarn</a>(<span class="stringliteral">&quot;%s: Couldn&#39;t get mutex lock (%s)\n&quot;</span>,</div>
<div class="line">          mutexName, strerror(errno));</div>
<div class="line">      <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acc0688538601983d020dbef70135ef0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oml_lock_persistent </td>
          <td>(</td>
          <td class="paramtype">pthread_mutex_t *&#160;</td>
          <td class="paramname"><em>mutexP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mutexName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to obtain a lock on the <a class="el" href="structBufferedWriter.html">BufferedWriter</a> until it succeeds </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutexP</td><td>pointer to mutex to unlock </td></tr>
    <tr><td class="paramname">mutexName</td><td>name of mutex; used for error reporting only </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="misc_8c.html#a861bb71000024af9ccc3f6b5fe9a9e43">oml_lock</a>, <a class="el" href="misc_8c.html#ab63adbadcb0c3da575b790cfebfe99b3">oml_unlock</a> </dd></dl>

<p>Definition at line <a class="el" href="misc_8c_source.html#l00086">86</a> of file <a class="el" href="misc_8c_source.html">misc.c</a>.</p>

<p>References <a class="el" href="log_8c_source.html#l00309">logwarn()</a>, and <a class="el" href="misc_8c_source.html#l00052">oml_lock()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">while</span> (<a class="code" href="client_8h.html#a861bb71000024af9ccc3f6b5fe9a9e43">oml_lock</a>(mutexP, mutexName)) {</div>
<div class="line">    <a class="code" href="log_8c.html#ac65b3f90d3228474368b2b48a488cd44">logwarn</a>(<span class="stringliteral">&quot;Cannot get lock in %s; will try again soon.\n&quot;</span>, mutexName);</div>
<div class="line">    sleep(1);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5c8c53afa6d604173e0abd9b2a824089"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlMStream.html">OmlMStream</a>* oml_mp_get_default_ms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMP.html">OmlMP</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get or create a default MS for the given MP, reporting all fields, using the OML instance's default samples and intervals and writing to its default writer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mp</td><td><a class="el" href="structOmlMP.html">OmlMP</a> for which to set the filter configuration </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the OmlMstream if successful, NULL otherwise </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l01153">1153</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="init_8c_source.html#l01187">create_default_filters()</a>, <a class="el" href="init_8c_source.html#l00963">create_mstream()</a>, <a class="el" href="omlc_8h_source.html#l00718">OmlMP::default_ms</a>, <a class="el" href="client_8h_source.html#l00077">OmlClient::default_writer</a>, <a class="el" href="filter_8c_source.html#l00050">filter_engine_start()</a>, <a class="el" href="log_8c_source.html#l00333">logdebug()</a>, <a class="el" href="log_8c_source.html#l00297">logerror()</a>, <a class="el" href="omlc_8h_source.html#l00691">OmlMP::name</a>, <a class="el" href="client_8h_source.html#l00063">OmlClient::sample_count</a>, <a class="el" href="client_8h_source.html#l00065">OmlClient::sample_interval</a>, and <a class="el" href="omlc_8h_source.html#l00702">OmlMP::streams</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00365">omlc_add_mp()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span>(NULL == <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a> || NULL == mp) {</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="log_8c.html#a1db1902215b0897e1ec8c2a8766465b2">logdebug</a>(<span class="stringliteral">&quot;Getting default MS for MP %s\n&quot;</span>, mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (!mp-&gt;<a class="code" href="structOmlMP.html#a79c085c2ffa4931e2c09d7a9e8ada705">default_ms</a>) {</div>
<div class="line">    <span class="keywordflow">if</span>(!mp-&gt;<a class="code" href="structOmlMP.html#a0053c119979daf6d558c414b685e17f5">streams</a>) {</div>
<div class="line">      <a class="code" href="client_8h.html#aae69d5e89a47ef7b1324df2155bcfa8b">create_mstream</a> (NULL, mp,</div>
<div class="line">          <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a4abe3253caeb7b241410b8e25844b58a">default_writer</a>,</div>
<div class="line">          <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a653012b8d0c03c8fbdc72f61a6cfe25b">sample_interval</a>,</div>
<div class="line">          <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a6a1e7783b73a5c3c927faac1952b9df0">sample_count</a> );</div>
<div class="line">      <span class="keywordflow">if</span> (NULL == mp-&gt;<a class="code" href="structOmlMP.html#a0053c119979daf6d558c414b685e17f5">streams</a>) {</div>
<div class="line">        <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a>(<span class="stringliteral">&quot;Error creating MS %s\n&quot;</span>, mp-&gt;<a class="code" href="structOmlMP.html#a5f99c0c042cdd120e19271c716d3eaac">name</a>);</div>
<div class="line">        <span class="keywordflow">return</span> NULL;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <a class="code" href="client_8h.html#accd762f6cd773e4bfb598096410b0bf5">create_default_filters</a>(mp, mp-&gt;<a class="code" href="structOmlMP.html#a0053c119979daf6d558c414b685e17f5">streams</a>);</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a653012b8d0c03c8fbdc72f61a6cfe25b">sample_interval</a> &gt; 0) {</div>
<div class="line">        <a class="code" href="client_8h.html#a1740a7e71f0ae4e436464805e071c37e">filter_engine_start</a>(mp-&gt;<a class="code" href="structOmlMP.html#a0053c119979daf6d558c414b685e17f5">streams</a>);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    mp-&gt;<a class="code" href="structOmlMP.html#a79c085c2ffa4931e2c09d7a9e8ada705">default_ms</a> = mp-&gt;<a class="code" href="structOmlMP.html#a0053c119979daf6d558c414b685e17f5">streams</a>;</div>
<div class="line"></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> mp-&gt;<a class="code" href="structOmlMP.html#a79c085c2ffa4931e2c09d7a9e8ada705">default_ms</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a94accc8192536cbda920a4f3adf26c34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int oml_ms_add_writer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlMStream.html">OmlMStream</a> *&#160;</td>
          <td class="paramname"><em>ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structOmlWriter.html">OmlWriter</a> *&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a new writer to an existing MS </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>MStream to add w to </td></tr>
    <tr><td class="paramname">w</td><td>writer to add to MS</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error (previous writers are preserved) </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l01052">1052</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="log_8c_source.html#l00297">logerror()</a>, <a class="el" href="omlc_8h_source.html#l00784">OmlMStream::nwriters</a>, <a class="el" href="mem_8c_source.html#l00206">oml_realloc()</a>, <a class="el" href="omlc_8h_source.html#l00739">OmlMStream::table_name</a>, and <a class="el" href="omlc_8h_source.html#l00782">OmlMStream::writers</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00963">create_mstream()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">int</span> n;</div>
<div class="line">  <a class="code" href="structOmlWriter.html">OmlWriter</a> **writers;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>(!ms || !w) {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a>(<span class="stringliteral">&quot;%s: ms (%p) or w (%p) are invalid&quot;</span>, __FUNCTION__, ms, w);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  n = ms-&gt;<a class="code" href="structOmlMStream.html#a98172393f791aba57e2431a97f332ba2">nwriters</a> + 1;</div>
<div class="line"></div>
<div class="line">  writers = (<a class="code" href="structOmlWriter.html">OmlWriter</a> **)<a class="code" href="mem_8c.html#ae75af3096ebd921116baca5ed9208488">oml_realloc</a>(ms-&gt;<a class="code" href="structOmlMStream.html#ad436c40e7e14ae11cde0361871a7eabd">writers</a>, n*<span class="keyword">sizeof</span>(<a class="code" href="structOmlWriter.html">OmlWriter</a>*));</div>
<div class="line">  <span class="keywordflow">if</span> (!writers) {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a>(<span class="stringliteral">&quot;Cannot (re)allocate memory for %s&#39;s writers array\n&quot;</span>, ms-&gt;<a class="code" href="structOmlMStream.html#a0613b1a0952e979da8fc278dc9b3c280">table_name</a>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  writers[n-1] = w;</div>
<div class="line">  ms-&gt;<a class="code" href="structOmlMStream.html#ad436c40e7e14ae11cde0361871a7eabd">writers</a> = writers;</div>
<div class="line">  ms-&gt;<a class="code" href="structOmlMStream.html#a98172393f791aba57e2431a97f332ba2">nwriters</a> = n;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab63adbadcb0c3da575b790cfebfe99b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oml_unlock </td>
          <td>(</td>
          <td class="paramtype">pthread_mutex_t *&#160;</td>
          <td class="paramname"><em>mutexP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mutexName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unock a mutex </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutexP</td><td>pointer to mutex to unlock </td></tr>
    <tr><td class="paramname">mutexName</td><td>name of mutex; used for error reporting only </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="misc_8c.html#a861bb71000024af9ccc3f6b5fe9a9e43">oml_lock</a> </dd></dl>

<p>Definition at line <a class="el" href="misc_8c_source.html#l00070">70</a> of file <a class="el" href="misc_8c_source.html">misc.c</a>.</p>

<p>References <a class="el" href="log_8c_source.html#l00309">logwarn()</a>.</p>

<p>Referenced by <a class="el" href="buffered__writer_8c_source.html#l00165">bw_close()</a>, <a class="el" href="buffered__writer_8c_source.html#l00365">bw_get_write_buf()</a>, <a class="el" href="buffered__writer_8c_source.html#l00211">bw_push()</a>, <a class="el" href="buffered__writer_8c_source.html#l00266">bw_push_meta()</a>, <a class="el" href="buffered__writer_8c_source.html#l00392">bw_unlock_buf()</a>, and <a class="el" href="misc_8c_source.html#l00040">mp_unlock()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> (mutexP) {</div>
<div class="line">    <span class="keywordflow">if</span> (pthread_mutex_unlock(mutexP)) {</div>
<div class="line">      <a class="code" href="log_8c.html#ac65b3f90d3228474368b2b48a488cd44">logwarn</a>(<span class="stringliteral">&quot;%s: Couldn&#39;t unlock mutex (%s)\n&quot;</span>,</div>
<div class="line">          mutexName, strerror(errno));</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1654081a08d8239be5a9bcff2f2cc69d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlWriter.html">OmlWriter</a>* text_writer_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structOmlOutStream.html">OmlOutStream</a> *&#160;</td>
          <td class="paramname"><em>out_stream</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new <a class="el" href="structOmlTextWriter.html">OmlTextWriter</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out_stream</td><td><a class="el" href="structOmlOutStream.html">OmlOutStream</a> into which the data should be written</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the new <a class="el" href="structOmlTextWriter.html">OmlTextWriter</a> cast as an <a class="el" href="structOmlWriter.html">OmlWriter</a></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="structBufferedWriter.html">BufferedWriter</a> </dd></dl>

<p>Definition at line <a class="el" href="text__writer_8c_source.html#l00083">83</a> of file <a class="el" href="text__writer_8c_source.html">text_writer.c</a>.</p>

<p>References <a class="el" href="buffered__writer_8c_source.html#l00108">bw_create()</a>, <a class="el" href="client_8h_source.html#l00067">OmlClient::max_queue</a>, <a class="el" href="mem_8c_source.html#l00157">oml_malloc()</a>, and <a class="el" href="init_8c_source.html#l00040">omlc_instance</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00741">create_writer()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  assert(out_stream != NULL);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="structOmlTextWriter.html">OmlTextWriter</a>* <span class="keyword">self</span> = (<a class="code" href="structOmlTextWriter.html">OmlTextWriter</a> *)<a class="code" href="omlc_8h.html#a8616cb714d6589098267bba8fc7b48c2">oml_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="structOmlTextWriter.html">OmlTextWriter</a>));</div>
<div class="line">  memset(<span class="keyword">self</span>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structOmlTextWriter.html">OmlTextWriter</a>));</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>-&gt;bufferedWriter = <a class="code" href="buffered__writer_8c.html#a3ecd9e79fcb660670057ba8ccbde739a">bw_create</a>(out_stream, <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#abfc08a3aa1c2c3d81dcb7580d14ee95b">max_queue</a>, 0);</div>
<div class="line">  <span class="keyword">self</span>-&gt;out_stream = out_stream;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>-&gt;meta = owt_meta;</div>
<div class="line">  <span class="keyword">self</span>-&gt;header_done = owt_header_done;</div>
<div class="line">  <span class="keyword">self</span>-&gt;row_start = owt_row_start;</div>
<div class="line">  <span class="keyword">self</span>-&gt;row_end = owt_row_end;</div>
<div class="line">  <span class="keyword">self</span>-&gt;out = owt_row_cols;</div>
<div class="line">  <span class="keyword">self</span>-&gt;close = owt_close;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> (<a class="code" href="structOmlWriter.html">OmlWriter</a>*)<span class="keyword">self</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4412addfb041b81d8b5dd6ce44153952"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* validate_app_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Validate the name of the application.</p>
<p>If the application name contains a '/', it is truncated to the sub-string following the final '/'. If the application name contains any characters other than alphanumeric characters or an underscore, it is declared invalid. The first character must not be a digit. Whitespace is not allowed. An empty string is also not allowed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the application.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the application name is valid, a pointer to the application name, possibly truncated, is returned. If the application name is not valid, returns NULL. If the returned pointer is not NULL, it may be different from name. </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l01473">1473</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="validate_8c_source.html#l00036">validate_name()</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00096">omlc_init()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <span class="keywordtype">size_t</span> len = strlen (<a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span>* p = <a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> + len - 1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span> (p &gt;= <a class="code" href="init_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    p--;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/* Either 1 character before name, or &#39;/&#39;: need to move forward 1 character */</span></div>
<div class="line">  p++;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="validate_8c.html#a85934d9b2c3cfbeb3f718b179a2fb596">validate_name</a> (p))</div>
<div class="line">    <span class="keywordflow">return</span> p;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<h2>Variable Documentation</h2>
<a class="anchor" id="ae265e6c78eb3c0a1f4fdb40fe894394e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlClient.html">OmlClient</a>* omlc_instance</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Global <a class="el" href="structOmlClient.html">OmlClient</a> instance </p>

<p>Definition at line <a class="el" href="init_8c_source.html#l00040">40</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>Referenced by <a class="el" href="bin__writer_8c_source.html#l00091">bin_writer_new()</a>, <a class="el" href="api_8c_source.html#l00149">omlc_inject()</a>, <a class="el" href="api_8c_source.html#l00218">omlc_inject_metadata()</a>, <a class="el" href="parse__config_8c_source.html#l00223">parse_config()</a>, <a class="el" href="check__liboml2__api_8c_source.html#l00084">START_TEST()</a>, and <a class="el" href="text__writer_8c_source.html#l00083">text_writer_new()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_faf4e77b1ae3fad210f246d6190ea8fa.html">client</a></li><li class="navelem"><a class="el" href="client_8h.html">client.h</a></li>
    <li class="footer">Generated on Thu Jun 25 2015 15:31:55 for oml2 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
