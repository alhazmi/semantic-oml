<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>oml2: oml_writer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="oml_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">oml2
   &#160;<span id="projectnumber">2.12.0pre.79-58cf-dirty</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('oml__writer_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">oml_writer.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Abstract interface for writers.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="omlc_8h_source.html">oml2/omlc.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for oml_writer.h:</div>
<div class="dyncontent">
<div class="center"><img src="oml__writer_8h__incl.png" border="0" usemap="#oml__writer_8h" alt=""/></div>
<map name="oml__writer_8h" id="oml__writer_8h">
<area shape="rect" id="node3" href="omlc_8h.html" title="Public API of the OML client library." alt="" coords="265,83,359,112"/><area shape="rect" id="node17" href="o__log_8h.html" title="ocomm/o_log.h" alt="" coords="552,160,661,189"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="oml__writer_8h__dep__incl.png" border="0" usemap="#oml__writer_8hdep" alt=""/></div>
<map name="oml__writer_8hdep" id="oml__writer_8hdep">
<area shape="rect" id="node3" href="oml__filter_8h.html" title="Abstract interface for filters." alt="" coords="1329,83,1415,112"/><area shape="rect" id="node7" href="client_8h.html" title="Defines various structures and functions used by various parts." alt="" coords="465,169,529,199"/><area shape="rect" id="node10" href="bin__writer_8c.html" title="An implementation of the OmlWriter interface functions (see oml2/oml_writer.h) that writes messages u..." alt="" coords="5,256,93,285"/><area shape="rect" id="node16" href="filter_8c.html" title="OML&#39;s client side filter engine." alt="" coords="965,256,1024,285"/><area shape="rect" id="node18" href="init_8c.html" title="Implement the user&#45;visible initialisation routines of the user&#45;visible OML API." alt="" coords="1179,256,1229,285"/><area shape="rect" id="node26" href="text__writer_8c.html" title="An implementation of the OmlWriter interface functions (see oml2/oml_writer.h) that serializes measur..." alt="" coords="117,256,211,285"/><area shape="rect" id="node43" href="check__liboml2__filters_8c.html" title="check_liboml2_filters.c" alt="" coords="1512,256,1667,285"/><area shape="rect" id="node58" href="fuseki__adapter-new-yahya_8c.html" title="fuseki_adapter&#45;new\l&#45;yahya.c" alt="" coords="1825,161,1959,207"/><area shape="rect" id="node60" href="fuseki__adapter_8c.html" title="fuseki_adapter.c" alt="" coords="1983,169,2100,199"/><area shape="rect" id="node62" href="fuseki__adapter__beforeyahyachanges_8c.html" title="fuseki_adapter_beforeyahyachanges.c" alt="" coords="2124,169,2369,199"/><area shape="rect" id="node64" href="fuseki__adapter__in__progress_8c.html" title="fuseki_adapter_in_progress.c" alt="" coords="2393,169,2585,199"/><area shape="rect" id="node66" href="fuseki__adapter__working_8c.html" title="fuseki_adapter_working.c" alt="" coords="2609,169,2780,199"/><area shape="rect" id="node68" href="virtuoso__adapter_8c.html" title="virtuoso_adapter.c" alt="" coords="2804,169,2932,199"/><area shape="rect" id="node84" href="check__util_8c.html" title="Miscellaneous functions and macros used elsewhere in testing." alt="" coords="2779,256,2869,285"/><area shape="rect" id="node87" href="buffered__writer_8h.html" title="buffered_writer.h" alt="" coords="252,169,369,199"/><area shape="rect" id="node97" href="client__handler_8c.html" title="The client handler receives callbacks from the eventloop and processes messages in either OML&#39;s text ..." alt="" coords="3057,169,3169,199"/><area shape="rect" id="node99" href="client__handler_8h.html" title="client_handler.h" alt="" coords="3276,83,3388,112"/><area shape="rect" id="node102" href="oml2-server_8c.html" title="Main oml2&#45;server functions." alt="" coords="3193,169,3295,199"/><area shape="rect" id="node5" href="api_8c.html" title="Implement the user&#45;visible API of OML." alt="" coords="376,256,427,285"/><area shape="rect" id="node33" href="average__filter_8c.html" title="Implements a filter which calculates the average over all the samples it received over the sample per..." alt="" coords="705,169,815,199"/><area shape="rect" id="node35" href="delta__filter_8c.html" title="Implements a filter which returns the difference between the previously reported and current sample v..." alt="" coords="839,169,932,199"/><area shape="rect" id="node37" href="factory_8h.html" title="factory.h" alt="" coords="1372,169,1444,199"/><area shape="rect" id="node45" href="first__filter_8c.html" title="Implements a filter which captures the first value presented." alt="" coords="956,169,1041,199"/><area shape="rect" id="node47" href="histogram__filter_8c.html" title="Implements a filter which calculates." alt="" coords="1065,169,1188,199"/><area shape="rect" id="node49" href="last__filter_8c.html" title="Implements a filter which captures the last value presented." alt="" coords="1212,169,1297,199"/><area shape="rect" id="node51" href="stddev__filter_8c.html" title="Implements a filter that calculates the standard deviation (and variance) over all samples it receive..." alt="" coords="1468,169,1572,199"/><area shape="rect" id="node53" href="sum__filter_8c.html" title="Implements a filter which sums all the samples it received over the sample period." alt="" coords="1596,169,1687,199"/><area shape="rect" id="node70" href="check__util_8h.html" title="check_util.h" alt="" coords="1711,169,1801,199"/><area shape="rect" id="node12" href="buffered__writer_8c.html" title="A non&#45;blocking, self&#45;draining FIFO queue using threads." alt="" coords="235,256,352,285"/><area shape="rect" id="node14" href="file__stream_8c.html" title="An OmlOutStream implementation that writer that writes measurement tuples to a file on the local file..." alt="" coords="637,256,733,285"/><area shape="rect" id="node20" href="misc_8c.html" title="Implements various common utility functions (XXX: Only mutex lock/unlock)." alt="" coords="757,256,819,285"/><area shape="rect" id="node22" href="net__stream_8c.html" title="An OmlOutStream implementation that writer that sends measurement tuples over the network..." alt="" coords="843,256,941,285"/><area shape="rect" id="node24" href="parse__config_8c.html" title="The XML configuration file parser functions." alt="" coords="1048,256,1155,285"/><area shape="rect" id="node28" href="check__liboml2__api_8c.html" title="Test the user&#45;visible OML API." alt="" coords="1349,256,1488,285"/><area shape="rect" id="node30" href="check__liboml2__writers_8c.html" title="check_liboml2_writers.c" alt="" coords="451,256,613,285"/><area shape="rect" id="node39" href="factory_8c.html" title="Implements the functions to create and manage filters." alt="" coords="1253,256,1325,285"/><area shape="rect" id="node73" href="check__liboml2__bswap_8c.html" title="check_liboml2_bswap.c" alt="" coords="2421,256,2581,285"/><area shape="rect" id="node75" href="check__liboml2__cbuf_8c.html" title="check_liboml2_cbuf.c" alt="" coords="1691,256,1837,285"/><area shape="rect" id="node77" href="check__liboml2__config_8c.html" title="Test the client&#45;side XML configuration parsing." alt="" coords="1861,256,2019,285"/><area shape="rect" id="node80" href="check__liboml2__mbuf_8c.html" title="check_liboml2_mbuf.c" alt="" coords="2043,256,2195,285"/><area shape="rect" id="node82" href="check__libshared__marshal_8c.html" title="check_libshared_marshal.c" alt="" coords="2219,256,2397,285"/><area shape="rect" id="node104" href="check__binary__protocol_8c.html" title="check_binary_protocol.c" alt="" coords="3551,256,3713,285"/><area shape="rect" id="node106" href="check__server_8h.html" title="check_server.h" alt="" coords="3420,169,3529,199"/><area shape="rect" id="node109" href="check__server_8c.html" title="check_server.c" alt="" coords="3244,256,3353,285"/><area shape="rect" id="node111" href="check__text__protocol_8c.html" title="check_text_protocol.c" alt="" coords="3377,256,3527,285"/></map>
</div>
</div>
<p><a href="oml__writer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOmlWriter.html">OmlWriter</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af75a169577e29521487110b60fa97c9f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#af75a169577e29521487110b60fa97c9f">OML_PROTOCOL_VERSION</a>&#160;&#160;&#160;5</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a32283dcabb8a02edee4360480f996704"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structBufferedWriter.html">BufferedWriter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#a32283dcabb8a02edee4360480f996704">BufferedWriter</a></td></tr>
<tr class="memitem:aa0fa06a0249ff9cf45f0f42059bcfe57"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#aa0fa06a0249ff9cf45f0f42059bcfe57">oml_writer_meta</a> )(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer, char *<a class="el" href="msggen_8rb.html#a527922e5e6edf37ba3f4dfa0139f5966">string</a>)</td></tr>
<tr class="memitem:ab3d65132c9fe522cc8cef886c7f2e643"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#ab3d65132c9fe522cc8cef886c7f2e643">oml_writer_header_done</a> )(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer)</td></tr>
<tr class="memitem:a41b081311eb21b4b76a31ae86a66dfe8"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#a41b081311eb21b4b76a31ae86a66dfe8">oml_writer_row_start</a> )(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer, <a class="el" href="structOmlMStream.html">OmlMStream</a> *ms, double now)</td></tr>
<tr class="memitem:ada67a09a0370a5eb8be837a3be7b4293"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#ada67a09a0370a5eb8be837a3be7b4293">oml_writer_row_end</a> )(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer, <a class="el" href="structOmlMStream.html">OmlMStream</a> *ms)</td></tr>
<tr class="memitem:a43b4f370f713129f2c4abb9311e20b52"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#a43b4f370f713129f2c4abb9311e20b52">oml_writer_out</a> )(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer, <a class="el" href="structOmlValue.html">OmlValue</a> *values, int values_count)</td></tr>
<tr class="memitem:a18618f8e30a68a6ec5349e645ec7975f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#a18618f8e30a68a6ec5349e645ec7975f">oml_writer_close</a> )(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer)</td></tr>
<tr class="memitem:a4843ebf6bdc9f71ad87f4fd21f59bd7f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structOmlWriter.html">OmlWriter</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#a4843ebf6bdc9f71ad87f4fd21f59bd7f">OmlWriter</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a959172e0c35e858e1ade72178cf27173"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173">StreamEncoding</a> { <a class="el" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173aedbfd5c057213d683dab8b73f2c0d8a1">SE_None</a>, 
<a class="el" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173a69ceab39b4642dd473e40f96f3abcddc">SE_Text</a>, 
<a class="el" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173a4fe1ba3f0e240b2e7ea8e0513e5c0212">SE_Binary</a>
 }</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a38839581577d7fc5c4529eba39289987"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOmlWriter.html">OmlWriter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="oml__writer_8h.html#a38839581577d7fc5c4529eba39289987">create_writer</a> (const char *uri, enum <a class="el" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173">StreamEncoding</a> encoding)</td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Abstract interface for writers. </p>
<p>A writer is in charge of serialising the OML samples (using either the text or binary protocol <a class="el" href="omsp.html#omspbin">OMSP Binary Marshalling</a>), and outputting them somewhere (network or file).</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="structOmlTextWriter.html">OmlTextWriter</a>, <a class="el" href="structOmlBinWriter.html">OmlBinWriter</a> </dd></dl>

<p>Definition in file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>
</div><h2>Macro Definition Documentation</h2>
<a class="anchor" id="af75a169577e29521487110b60fa97c9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OML_PROTOCOL_VERSION&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The OMSP version that this library speaks.</p>
<p>This also defines the highest protocol revision that the oml2-server built along can understand. </p>

<p>Definition at line <a class="el" href="oml__writer_8h_source.html#l00030">30</a> of file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>

<p>Referenced by <a class="el" href="init_8c_source.html#l00096">omlc_init()</a>.</p>

</div>
</div>
<h2>Typedef Documentation</h2>
<a class="anchor" id="a32283dcabb8a02edee4360480f996704"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structBufferedWriter.html">BufferedWriter</a> <a class="el" href="structBufferedWriter.html">BufferedWriter</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="oml__writer_8h_source.html#l00033">33</a> of file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a18618f8e30a68a6ec5349e645ec7975f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structOmlWriter.html">OmlWriter</a>*(* oml_writer_close)(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function called to close the writer and free its allocated objects.</p>
<p>This function is designed so it can be used in a while loop to clean up the entire linked list:</p>
<p>while( (w=w-&gt;close(w)) );</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>pointer to the writer to close and destroy </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the next writer in the list (writer-&gt;next, which can be NULL) </dd></dl>

<p>Definition at line <a class="el" href="oml__writer_8h_source.html#l00095">95</a> of file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab3d65132c9fe522cc8cef886c7f2e643"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* oml_writer_header_done)(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function called to finalise meta header</p>
<p>This function should essentially add the 'content: [binary|text]' line to the already written headers</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>pointer to <a class="el" href="structOmlWriter.html">OmlWriter</a> instance </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on error</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="oml__writer_8h.html#aa0fa06a0249ff9cf45f0f42059bcfe57">oml_writer_meta</a> </dd></dl>

<p>Definition at line <a class="el" href="oml__writer_8h_source.html#l00052">52</a> of file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa0fa06a0249ff9cf45f0f42059bcfe57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* oml_writer_meta)(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer, char *<a class="el" href="msggen_8rb.html#a527922e5e6edf37ba3f4dfa0139f5966">string</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function called whenever some header metadata needs to be added. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>pointer to <a class="el" href="structOmlWriter.html">OmlWriter</a> instance </td></tr>
    <tr><td class="paramname">string</td><td>character string to add to headers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on error </dd></dl>

<p>Definition at line <a class="el" href="oml__writer_8h_source.html#l00040">40</a> of file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a43b4f370f713129f2c4abb9311e20b52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* oml_writer_out)(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer, <a class="el" href="structOmlValue.html">OmlValue</a> *values, int values_count)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function called for every result value in a measurement tuple (sample) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>pointer to <a class="el" href="structOmlWriter.html">OmlWriter</a> instance </td></tr>
    <tr><td class="paramname">values</td><td>array of <a class="el" href="structOmlValue.html">OmlValue</a> to write out </td></tr>
    <tr><td class="paramname">values_count</td><td>size of the values array</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of values written on success, or 0 otherwise </dd></dl>

<p>Definition at line <a class="el" href="oml__writer_8h_source.html#l00083">83</a> of file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>

</div>
</div>
<a class="anchor" id="ada67a09a0370a5eb8be837a3be7b4293"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* oml_writer_row_end)(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer, <a class="el" href="structOmlMStream.html">OmlMStream</a> *ms)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function called after all items in a tuple have been sent </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>pointer to <a class="el" href="structOmlWriter.html">OmlWriter</a> instance </td></tr>
    <tr><td class="paramname">ms</td><td><a class="el" href="structOmlMStream.html">OmlMStream</a> for which the sample is</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on error</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="oml__writer_8h.html#a41b081311eb21b4b76a31ae86a66dfe8">oml_writer_row_start</a>, <a class="el" href="oml__writer_8h.html#a43b4f370f713129f2c4abb9311e20b52">oml_writer_out</a> </dd></dl>

<p>Definition at line <a class="el" href="oml__writer_8h_source.html#l00074">74</a> of file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a41b081311eb21b4b76a31ae86a66dfe8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* oml_writer_row_start)(struct <a class="el" href="structOmlWriter.html">OmlWriter</a> *writer, <a class="el" href="structOmlMStream.html">OmlMStream</a> *ms, double now)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function called to prepare a new sample. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">writer</td><td>pointer to <a class="el" href="structOmlWriter.html">OmlWriter</a> instance </td></tr>
    <tr><td class="paramname">ms</td><td><a class="el" href="structOmlMStream.html">OmlMStream</a> for which the sample is </td></tr>
    <tr><td class="paramname">now</td><td>current timestamp</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on error</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="oml__writer_8h.html#a43b4f370f713129f2c4abb9311e20b52">oml_writer_out</a>, <a class="el" href="oml__writer_8h.html#ada67a09a0370a5eb8be837a3be7b4293">oml_writer_row_end</a> </dd></dl>

<p>Definition at line <a class="el" href="oml__writer_8h_source.html#l00064">64</a> of file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4843ebf6bdc9f71ad87f4fd21f59bd7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structOmlWriter.html">OmlWriter</a>  <a class="el" href="structOmlWriter.html">OmlWriter</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An instance of an OML Writer </p>

</div>
</div>
<h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a959172e0c35e858e1ade72178cf27173"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173">StreamEncoding</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stream encoding type, for use with create_writer </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a959172e0c35e858e1ade72178cf27173aedbfd5c057213d683dab8b73f2c0d8a1"></a>SE_None</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a959172e0c35e858e1ade72178cf27173a69ceab39b4642dd473e40f96f3abcddc"></a>SE_Text</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a959172e0c35e858e1ade72178cf27173a4fe1ba3f0e240b2e7ea8e0513e5c0212"></a>SE_Binary</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="oml__writer_8h_source.html#l00125">125</a> of file <a class="el" href="oml__writer_8h_source.html">oml_writer.h</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">  <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173aedbfd5c057213d683dab8b73f2c0d8a1">SE_None</a>, <span class="comment">// Not explicitly specified by the user</span></div>
<div class="line">  <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173a69ceab39b4642dd473e40f96f3abcddc">SE_Text</a>,</div>
<div class="line">  <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173a4fe1ba3f0e240b2e7ea8e0513e5c0212">SE_Binary</a></div>
<div class="line">};</div>
</div><!-- fragment -->
</div>
</div>
<h2>Function Documentation</h2>
<a class="anchor" id="a38839581577d7fc5c4529eba39289987"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOmlWriter.html">OmlWriter</a>* create_writer </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173">StreamEncoding</a>&#160;</td>
          <td class="paramname"><em>encoding</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create either a file writer or a network writer </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uri</td><td>collection URI </td></tr>
    <tr><td class="paramname">encoding</td><td>StreamEncoding to use for the output, either SE_Text or SE_Binary</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the new <a class="el" href="structOmlWriter.html">OmlWriter</a>, or NULL on error </dd></dl>

<p>Definition at line <a class="el" href="init_8c_source.html#l00741">741</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p>References <a class="el" href="bin__writer_8c_source.html#l00091">bin_writer_new()</a>, <a class="el" href="client_8h_source.html#l00031">DEF_PORT_STRING</a>, <a class="el" href="client_8h_source.html#l00038">OmlClient::domain</a>, <a class="el" href="file__stream_8c_source.html#l00059">file_stream_new()</a>, <a class="el" href="file__stream_8c_source.html#l00168">file_stream_set_buffered()</a>, <a class="el" href="client_8h_source.html#l00051">OmlClient::first_writer</a>, <a class="el" href="log_8c_source.html#l00297">logerror()</a>, <a class="el" href="net__stream_8c_source.html#l00080">net_stream_new()</a>, <a class="el" href="oml__writer_8h_source.html#l00117">OmlWriter::next</a>, <a class="el" href="client_8h_source.html#l00040">OmlClient::node_name</a>, <a class="el" href="mem_8c_source.html#l00240">oml_free()</a>, <a class="el" href="mem_8c_source.html#l00288">oml_strndup()</a>, <a class="el" href="oml__util_8h_source.html#l00042">OML_URI_FILE_FLUSH</a>, <a class="el" href="oml__util_8h_source.html#l00048">oml_uri_is_file</a>, <a class="el" href="oml__util_8c_source.html#l00202">oml_uri_type()</a>, <a class="el" href="oml__util_8c_source.html#l00231">parse_uri()</a>, <a class="el" href="oml__writer_8h_source.html#l00128">SE_Binary</a>, <a class="el" href="oml__writer_8h_source.html#l00126">SE_None</a>, <a class="el" href="oml__writer_8h_source.html#l00127">SE_Text</a>, and <a class="el" href="text__writer_8c_source.html#l00083">text_writer_new()</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  <a class="code" href="oml__util_8h.html#a457629626f00794579ce6e607b0827d7">OmlURIType</a> uri_type = <a class="code" href="oml__util_8c.html#a301fddeafe0b5443ef133e7fc16af68f">oml_uri_type</a>(uri);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a> == NULL){</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a>(<span class="stringliteral">&quot;No omlc_instance:  OML client was not initialized properly.\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (uri == NULL || strlen(uri) &lt; 1) {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a> (<span class="stringliteral">&quot;Missing or invalid collection URI definition (e.g., --oml-collect)\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#a4190f5fc636fde56eae321f0f39c07ba">node_name</a> == NULL) {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a> (<span class="stringliteral">&quot;Missing &#39;--oml-id&#39; flag \n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#adc89fb9df041d3e5c14ebf4df6f856c4">domain</a> == NULL) {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a> (<span class="stringliteral">&quot;Missing &#39;--oml-domain&#39; flag \n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *transport = NULL;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *path = NULL;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *port = NULL;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="oml__util_8c.html#ab026ccb8032d813d97fe53004d39e12d">parse_uri</a> (uri, &amp;transport, &amp;path, &amp;port) == -1) {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a> (<span class="stringliteral">&quot;Error parsing server destination URI &#39;%s&#39;; failed to create stream for this destination\n&quot;</span>,</div>
<div class="line">              uri);</div>
<div class="line">    <span class="keywordflow">if</span> (transport) <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a> ((<span class="keywordtype">void</span>*)transport);</div>
<div class="line">    <span class="keywordflow">if</span> (path) <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a> ((<span class="keywordtype">void</span>*)path);</div>
<div class="line">    <span class="keywordflow">if</span> (port) <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a> ((<span class="keywordtype">void</span>*)port);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *filepath = NULL;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *hostname = NULL;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="oml__util_8h.html#a1fd898bbff0329c28ba4c6825610e6a1">oml_uri_is_file</a>(uri_type)) {</div>
<div class="line">    <span class="comment">/* &#39;file://path/to/file&#39; is equivalent to unix path &#39;/path/to/file&#39; */</span></div>
<div class="line">    <span class="keywordflow">if</span> (strncmp (path, <span class="stringliteral">&quot;//&quot;</span>, 2) == 0)</div>
<div class="line">      filepath = &amp;path[1];</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      filepath = path;</div>
<div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport) {</div>
<div class="line">    <span class="keywordflow">if</span> (strncmp (path, <span class="stringliteral">&quot;//&quot;</span>, 2) == 0)</div>
<div class="line">      hostname = &amp;path[2];</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      hostname = path;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    hostname = path; <span class="comment">/* If no transport specified, it must be tcp */</span></div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Default transport is tcp if not specified */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!transport) {</div>
<div class="line">    transport = <a class="code" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup</a> (<span class="stringliteral">&quot;tcp&quot;</span>, strlen (<span class="stringliteral">&quot;tcp&quot;</span>));</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* If not file transport, use the OML default port if unspecified */</span></div>
<div class="line">  <span class="keywordflow">if</span> (!port &amp;&amp; !<a class="code" href="oml__util_8h.html#a1fd898bbff0329c28ba4c6825610e6a1">oml_uri_is_file</a>(uri_type)) {</div>
<div class="line">    port = <a class="code" href="mem_8c.html#adca1f9f48333b1fa9af21312a3f4534c">oml_strndup</a> (<a class="code" href="client_8h.html#a4add3cf418c470c13d6aeb69187a1740">DEF_PORT_STRING</a>, strlen (<a class="code" href="client_8h.html#a4add3cf418c470c13d6aeb69187a1740">DEF_PORT_STRING</a>));</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="structOmlOutStream.html">OmlOutStream</a>* out_stream;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="oml__util_8h.html#a1fd898bbff0329c28ba4c6825610e6a1">oml_uri_is_file</a>(uri_type)) {</div>
<div class="line">    out_stream = <a class="code" href="client_8h.html#ac7dd4a100ddaba640ad0f3f19af7ae06">file_stream_new</a>(filepath);</div>
<div class="line">    <span class="keywordflow">if</span> (encoding == <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173aedbfd5c057213d683dab8b73f2c0d8a1">SE_None</a>) encoding = <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173a69ceab39b4642dd473e40f96f3abcddc">SE_Text</a>; <span class="comment">/* default encoding */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="oml__util_8h.html#a457629626f00794579ce6e607b0827d7acc2544b5a845cf76b4cebd89282dbd76">OML_URI_FILE_FLUSH</a> == uri_type) {</div>
<div class="line">      <a class="code" href="client_8h.html#a7e29655c822b05e3ebe7daf7308024e9">file_stream_set_buffered</a>(out_stream, 0);</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    out_stream = <a class="code" href="client_8h.html#af08fdd1497353e7fe6820aa5e1f765e9">net_stream_new</a>(transport, hostname, port);</div>
<div class="line">    <span class="keywordflow">if</span> (encoding == <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173aedbfd5c057213d683dab8b73f2c0d8a1">SE_None</a>) encoding = <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173a4fe1ba3f0e240b2e7ea8e0513e5c0212">SE_Binary</a>; <span class="comment">/* default encoding */</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (out_stream == NULL) {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a> (<span class="stringliteral">&quot;Failed to create stream for URI %s\n&quot;</span>, uri);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a> ((<span class="keywordtype">void</span>*)transport);</div>
<div class="line">  <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a> ((<span class="keywordtype">void</span>*)path);</div>
<div class="line">  <a class="code" href="omlc_8h.html#aa191af748bdc144fc077967bdacaaf70">oml_free</a> ((<span class="keywordtype">void</span>*)port);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Now create a write on top of the stream</span></div>
<div class="line">  <a class="code" href="structOmlWriter.html">OmlWriter</a>* writer = NULL;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">switch</span> (encoding) {</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173a69ceab39b4642dd473e40f96f3abcddc">SE_Text</a>:   writer = <a class="code" href="client_8h.html#a1654081a08d8239be5a9bcff2f2cc69d">text_writer_new</a> (out_stream); <span class="keywordflow">break</span>;</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173a4fe1ba3f0e240b2e7ea8e0513e5c0212">SE_Binary</a>: writer = <a class="code" href="bin__writer_8c.html#a5b581177f0c4b16e69c2ce68f60d7cff">bin_writer_new</a> (out_stream); <span class="keywordflow">break</span>;</div>
<div class="line">  <span class="keywordflow">case</span> <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173aedbfd5c057213d683dab8b73f2c0d8a1">SE_None</a>:</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a> (<span class="stringliteral">&quot;No encoding specified (this should never happen -- please report this as an OML bug)\n&quot;</span>);</div>
<div class="line">    <span class="comment">// should cleanup streams</span></div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (writer == NULL) {</div>
<div class="line">    <a class="code" href="log_8c.html#a0548af6117bef6d5c78d45a36ab7013b">logerror</a> (<span class="stringliteral">&quot;Failed to create writer for encoding &#39;%s&#39;.\n&quot;</span>, encoding == <a class="code" href="oml__writer_8h.html#a959172e0c35e858e1ade72178cf27173a4fe1ba3f0e240b2e7ea8e0513e5c0212">SE_Binary</a> ? <span class="stringliteral">&quot;binary&quot;</span> : <span class="stringliteral">&quot;text&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line">  }</div>
<div class="line">  writer-&gt;<a class="code" href="structOmlWriter.html#a301b6f73c465f0c0cd22d7a2ad7052f5">next</a> = <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#acc59517d7d5b3a215937bdcc4e361424">first_writer</a>;</div>
<div class="line">  <a class="code" href="client_8h.html#ae265e6c78eb3c0a1f4fdb40fe894394e">omlc_instance</a>-&gt;<a class="code" href="structOmlClient.html#acc59517d7d5b3a215937bdcc4e361424">first_writer</a> = writer;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> writer;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_faf4e77b1ae3fad210f246d6190ea8fa.html">client</a></li><li class="navelem"><a class="el" href="dir_30fa6499637aa7410a31fefbedc3eb0f.html">oml2</a></li><li class="navelem"><a class="el" href="oml__writer_8h.html">oml_writer.h</a></li>
    <li class="footer">Generated on Thu Jun 25 2015 15:31:55 for oml2 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
