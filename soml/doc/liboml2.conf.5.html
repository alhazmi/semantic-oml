<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.7" />
<title>liboml2.conf(5)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>liboml2.conf(5)</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph"><p>liboml2.conf - OML2 client library configuration file format</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><strong>&lt;oml2-enabled-app&gt;</strong> [APP-OPTIONS] --oml-config &lt;config-file&gt;</pre>
<div class="attribution">
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>liboml2</strong> is the client library for OML2.  It provides an API for
application writers to collect measurements from their applications
via user-defined <em>Measurement Points</em> (MPs).  It also provides a
flexible filtering and collection mechanism that allows application
users to customize how measurements are processed and stored by an
OML-enabled application.</p></div>
<div class="paragraph"><p>This man page documents the format of the configuration file that
<strong>liboml2</strong> uses to configure itself at runtime.  Application writers
who want to learn how to write an application using the <strong>liboml2</strong> API
should consult <a href="liboml2.3.html">liboml2(3)</a>.  OML also supports simpler but less
powerful configuration via the command line, for testing and
debugging.  It is documented in <a href="liboml2.1.html">liboml2(1)</a>.</p></div>
<div class="paragraph"><p>When an OML application starts up, it passes the command line
arguments to <strong>liboml2</strong>, which scans them for options that it
understands, and uses those to configure itself.  <strong>liboml2</strong> then
removes its own options from the command line so that the application
proper does not get confused by them.  All OML options start with the
<strong>--oml-</strong> prefix.  For more information, see <a href="liboml2.1.html">liboml2(1)</a>.</p></div>
<div class="paragraph"><p>The <strong>--oml-config</strong> command line option accepts the name of a
configuration file.  If specified, this file is used to configure the
library internally. All other <strong>--oml-</strong>* command line options are ignored
when it is specified.  The file is an XML document.  The configuration
file serves two main purposes: configuring the destinations for
measurement outputs, and configuring the filtering of the MP inputs
prior to sending them to their destinations.  It is therefore important
to understand how OML filters work.</p></div>
<div class="paragraph"><p>The data path between a measurement point and the measurement
destination looks like this:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>        ---&gt; F1 ---
       /           \
MP *--- ---&gt; F2 --- ---&gt; [ Collector ]---&gt; [ File/Network ]
       \           /
        |   ...   |
        |         |
         --&gt; FN --</tt></pre>
</div></div>
<div class="paragraph"><p>The samples injected to the MP are sent to N filters. The outputs of
all the filters are then multiplexed together into a combined output
stream by a collector. A "collector" takes measurement streams from
the output of the filters, multiplexes them together, and then sends
the combined measurement stream on to the destination, which is either
a file on the local disk or a remote OML server
(see <a href="oml2-server.1.html">oml2-server(1)</a>). Each collector sends measurements to just one
destination, but the configuration can specify multiple collectors,
each with a different destination.</p></div>
<div class="paragraph"><p>Note that although the diagram above shows the outputs of the filters
attached to one MP being sent to one collector, that same collector
may be accepting the output streams of filters attached to several
MPs. Further, the samples injected to an MP can be sent to a second
(or third, etc.) set of filters and then on to another collector. This
will become clear in the description of the configuration file format
below.</p></div>
<div class="paragraph"><p>Note that there is no round-robin scheme operating among the filters;
all injected samples are sent to all filters attached to the MP.</p></div>
<div class="paragraph"><p>There are two mechanisms available for generating outputs from
filters.  The first is the "samples" method.  It causes a
filter output sample to be generated for every <em>n</em>-th sample injected
into the filter.  The second is the "interval" method.  It causes a
filter output sample to be generated every <em>t</em> seconds.  The parameters
<em>t</em> and <em>n</em> can be specified in the configuration file.  The output
mechanism can be selected independently for each MP (or more
accurately, for each &lt;stream/&gt; element in the configuration file).</p></div>
<div class="paragraph"><p>An OML filter is a processing block that accepts a stream of typed
tuples from an MP on its input, computes a function of the input
tuples, and outputs the result as another stream of tuples.  The
schema of the input tuples can be different from the schema of the
output tuples, i.e. they can differ in number, name and type.
Further, the output samples can be generated at a different rate to
the input samples.  For instance, an output might be generated only on
every tenth input sample.  For more on MP and filter schemas and how
measurement outputs are generated, see the section <strong>MEASUREMENT OUTPUT
AND SCHEMAS</strong> below.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_file_format">CONFIGURATION FILE FORMAT</h2>
<div class="sectionbody">
<div class="paragraph"><p>The configuration file must be an XML file. The root element must be
<em>omlc</em>, and its children must be <em>collect</em> elements. The following
example shows the skeleton of an OML config file:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>    &lt;omlc domain="my_experiment" id="my_source_id"&gt;
        &lt;collect url="..." encoding="binary"&gt;
           ...
        &lt;/collect&gt;

        ...

        &lt;collect url="..."&gt;
           ...
        &lt;/collect&gt;
    &lt;/omlc&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>The <em>omlc</em> element recognizes two attributes: <em>experiment</em> and <em>id</em>.
The <em>domain</em> attribute names the experimental domain that the client
wants to join.  It names the database that the measurements will be
stored in by the <a href="oml2-server.1.html">oml2-server(1)</a> if one of the destinations is a
server.  This is the same as the <strong>--oml-domain</strong> flag on the command
line. The obsolescent <em>experiment</em> attribute can still be used for this
purpose.</p></div>
<div class="paragraph"><p>The <em>id</em> attribute identifies the source of these measurements.
Typically it is used to identify the machine, but it is up to the
experimenter what to put in the <em>id</em> field.  This is the same as the
<strong>--oml-id</strong> flag on the command line.</p></div>
<div class="paragraph"><p>The <em>encoding</em> attribute can be use to specify which protocol mode to
use.  <em>binary</em> is the default binary marshalling mechanism, while <em>text</em>
switches to text mode.</p></div>
<div class="paragraph"><p>The <em>collect</em> elements identify separate destinations for the
measurements generated by the client programme. The <em>url</em> attribute
identifies the destination. It can be either a file, or the IP address
(or hostname) and port of an <a href="oml2-server.1.html">oml2-server(1)</a>. See <strong>URI FORMAT</strong> in
<a href="liboml2.1.html#_uri_format">liboml2(1)</a>.  Within the <em>collect</em> element should be a sequence
of <em>stream</em> elements.  Each <em>stream</em> element defines the sampling policy
and filtering to apply to a measurement stream derived form a particular
named MP. Here is an example of a configuration with two <em>stream</em>
elements:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>    &lt;omlc domain="my_experiment" id="my_source_id"&gt;
        &lt;collect url="tcp:192.0.2.200"&gt;
           &lt;stream mp="radiotap" interval="2"&gt;
              &lt;filter field="sig_strength_dBm" /&gt;
              &lt;filter field="noise_strength_dBm" /&gt;
              &lt;filter field="power" /&gt;
           &lt;/stream&gt;
           &lt;stream mp="udp" samples="10"&gt;
              &lt;filter field="udp_len" /&gt;
           &lt;/stream&gt;
        &lt;/collect&gt;
    &lt;/omlc&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>This example connects to a server on the default TCP port (3003) at IP
address 192.0.2.200, and extracts measurements from two of the
application&#8217;s defined measurement points, named <em>radiotap</em> and <em>udp</em>,
respectively.  The <em>radiotap</em> measurements are sampled every two
seconds, and the <em>udp</em> measurements are sampled every 10 samples.  For
the <em>radiotap</em> measurements, three filters are defined: one for the
<em>sig_strength_dBm</em> field, one for the <em>noise_strength_dBm</em> field, and
one for the <em>power</em> field.  For the <em>udp</em> measurements, a single
filter is established on the <em>udp_len</em> field.</p></div>
<div class="paragraph"><p>The <em>stream</em> element also accepts a <em>name</em> attribute that allows the
stream name to be controlled by the user.  If <em>name</em> is omitted then
the stream is named according to &lt;app-name&gt;_&lt;mp-name&gt;, where
&lt;app-name&gt; is the application name as set by the application
developer, and &lt;mp-name&gt; is the name of the MP.  If <em>name</em> is used
then its value is used to construct the stream name as
&lt;app-name&gt;_&lt;stream-name&gt;.  A stream must have a unique name, so if the
user wants to create two streams from the same MP then at least one of
them must have a <em>name</em> attribute.  Omitting it, or having two streams
with identical <em>name</em> attributes, will result in the <strong>liboml2</strong>
configuration process aborting with an error message about the
duplicate stream in the OML client log file.</p></div>
<div class="paragraph"><p>Filters operate on a single scalar input value.  The <em>filter</em> element
establishes a filter and the <em>field</em> attribute selects the field of
the MP that should form the input for the filter.  The <em>field</em>
attribute is mandatory.</p></div>
<div class="paragraph"><p>Without any further attributes, the <em>filter</em> element establishes a default
filter.  The default filter type is <em>avg</em> for numeric values and
<em>first</em> for non-numeric values such as strings.</p></div>
<div class="paragraph"><p>The <em>filter</em> element also recognizes the <em>operation</em> attribute, which allows
the user to select what type of filter to apply.  For instance, the
following selects a standard deviation filter, <em>stddev</em>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;filter field="udp_len" operation="stddev"/&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>The <em>rename</em> attribute allows the user to name the stream output from
this filter:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;filter field="udp_len" operation="stddev" rename="udp_measurements"/&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>It is possible to include several <em>stream</em> elements using the same
<em>mp</em> attribute value. In that case, to avoid ambiguity the second will
be internally renamed to "&lt;name&gt;_2", the third to "&lt;name&gt;_3",
etc. This renaming will appear in the schema of the measurement
outputs (either in the local file or the database on the server end).
This behaviour may be augmented in a future version to give more
control of the renaming to the user.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_without_xml_file">CONFIGURATION WITHOUT XML FILE</h2>
<div class="sectionbody">
<div class="paragraph"><p>When no configuration file is given, <strong>liboml2</strong> provides a basic set of
filters for each measurement point, and sends measurements to just one
collection URI (given by either the <strong>--oml-collect</strong> command line
option).  For each measurement point, each element of the measurement
point&#8217;s injected tuple is given its own filter.  The filter created
depends on the type of the element and the current sampling policy.</p></div>
<div class="paragraph"><p>For instance, suppose a measurement point is defined with a
measurement tuple as follows:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>("source"      : OML_UINT64_VALUE,
 "destination" : OML_UINT64_VALUE,
 "length"      : OML_INT32_VALUE,
 "snr"         : OML_DOUBLE_VALUE,
 "name"        : OML_STRING_VALUE)</tt></pre>
</div></div>
<div class="paragraph"><p>Then <strong>liboml2</strong> will create a separate filter for each of "source",
"destination", "length", "snr", and "name".  The filters for the first
four numeric elements will be an averaging filter (filter type
<em>avg</em>), and the last string element will be given a <em>first</em> filter.
The <em>first</em> filter keeps the first injected value in the current
sampling period and throws away all others, passing the first value on
to the measurement output stage.</p></div>
<div class="paragraph"><p>For more information on measurement points and how
they are defined, see <a href="liboml.3.html">liboml(3)</a> and <a href="omlc_add_mp.3.html">omlc_add_mp(3)</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_measurement_output_and_schemas">MEASUREMENT OUTPUT AND SCHEMAS</h2>
<div class="sectionbody">
<div class="paragraph"><p>The measurement output of an OML program goes either to an SQL
database (if using a network address in the <em>collect</em> element&#8217;s <em>url</em>
attribute) or a file (if using the <em>file://</em> url protocol).
Measurement points are created with a <em>schema</em>, as above, a schema
being an ordered list of (name, type) pairs.</p></div>
<div class="paragraph"><p>OML filters also generate output with a declared schema. For each
measurement stream, <strong>liboml2</strong> generates a single output measurement
that is the union of the outputs of all filters attached to the MP.
The names of the fields (or columns) of the schema are derived from
the names of the original MP fields, and the output schemas of the
filters. The schemas can be observed directly in the file output
(identical schemas are sent to the server when a server is used). For
instance, here is the output schema for stream that takes its inputs
from a simple example MP that measures a string ("label") and an
integer ("seq_no"):</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>schema: 1 generator_lin label:string seq_no:uint32</tt></pre>
</div></div>
<div class="paragraph"><p>The schema name is "generator_lin"&#8201;&#8212;&#8201;a combination of the application
name ("generator") and the stream name ("lin").  (The number <em>1</em> on
this line is an index used in the output columns to identify a line of
measurement with the schema to which it conforms.)  This output can be
generated using an <em>mp</em> element with <em>samples="1"</em> and no explicit
filter:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;omlc domain="my_experiment" id="my_source_id"&gt;
 &lt;collect url="file:-"&gt;
   &lt;stream mp="lin" samples="1" /&gt;
 &lt;/collect&gt;
&lt;/omlc&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>This creates a <em>first</em> filter for both of the fields of the
measurement point.  The <em>first</em> filter outputs a single value that has
the same type as the filter&#8217;s input.</p></div>
<div class="paragraph"><p>If we change the configuration file to use <em>samples="2"</em>, then an
averaging filter is used for the numeric "seq_no" field ("label" is
unchanged).  The schema therefore changes as well:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>schema: 1 generator_lin label:string seq_no_avg:double seq_no_min:double seq_no_max:double</tt></pre>
</div></div>
<div class="paragraph"><p>An <em>avg</em> filter picks one field of the MP to filter (in this case
"seq_no") and then produces a 3-tuple as output (avg, min, max).
Therefore <strong>liboml2</strong> creates a schema for this filter output that looks
like:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>("seq_no_avg" : OML_DOUBLE_VALUE,
 "seq_no_min" : OML_DOUBLE_VALUE,
 "seq_no_max" : OML_DOUBLE_VALUE)</tt></pre>
</div></div>
<div class="paragraph"><p>This is the general pattern for filters:  their output schemas are
formed by appending the name of the source MP with the name of the
filter output field.  (The <em>first</em> filter is an exception in that it
just takes the name of the input field and uses that as the output
field name.)</p></div>
<div class="paragraph"><p>When output is sent to a server, a database table is created for each
measurement point using the combined OML output schema as schema for
the table. For instance, the above example would translate to an SQL
CREATE statement like:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>CREATE TABLE generator_lin (label TEXT, seq_no_avg REAL, seq_no_min REAL, seq_no_max REAL);</tt></pre>
</div></div>
<div class="paragraph"><p>Note that even though an MP field may have an integral type, it may be
represented as a floating point type in the output because the filter
may output floating point values.  For instance, the average of a set
of integers is real valued because of the division in the averaging
operation.</p></div>
<div class="paragraph"><p>If we use the <em>name</em> attribute of the &lt;stream/&gt; element, the name of
the schema will follow the <em>name</em> attribute rather than the name of
the source MP.  For instance consider this configuration file:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>&lt;omlc domain="my_experiment" id="my_source_id"&gt;
 &lt;collect url="file:-"&gt;
   &lt;stream mp="lin" samples="1" name="foo"/&gt;
 &lt;/collect&gt;
&lt;/omlc&gt;</tt></pre>
</div></div>
<div class="paragraph"><p>It will generate the following schema declaration:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>schema: 1 generator_foo label:string seq_no:uint32</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_available_filters">AVAILABLE FILTERS</h2>
<div class="sectionbody">
<div class="paragraph"><p>The following lists the filters that are available in OML, and
describes how they should be used.  We plan to add more filters with
each release of OML.</p></div>
<div class="sect2">
<h3 id="_first_filter_first">First Filter (first)</h3>
<div class="paragraph"><p>This filter saves the first sample in a sample set and throws away all
the rest, outputting just the first sample. It accepts any type of
value as its input. It outputs a single value:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>("first" : OML_INPUT_VALUE)</tt></pre>
</div></div>
<div class="paragraph"><p>The pseudo-type OML_INPUT_VALUE indicates that this filter&#8217;s output
has the same type as its input.</p></div>
<div class="paragraph"><p>To use this filter, use <em>operation="first"</em> in the <em>filter</em> element.</p></div>
</div>
<div class="sect2">
<h3 id="_last_filter_last">Last Filter (last)</h3>
<div class="paragraph"><p>This filter saves the last sample in a sample set and throws away all
the rest, outputting just the last sample. It accepts any type of
value as its input. It outputs a single value:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>("last" : OML_INPUT_VALUE)</tt></pre>
</div></div>
<div class="paragraph"><p>The pseudo-type OML_INPUT_VALUE indicates that this filter&#8217;s output
has the same type as its input.</p></div>
<div class="paragraph"><p>To use this filter, use <em>operation="last"</em> in the <em>filter</em> element.</p></div>
</div>
<div class="sect2">
<h3 id="_averaging_filter_avg">Averaging Filter (avg)</h3>
<div class="paragraph"><p>This filter computes the average of its input samples. It accepts
numeric inputs only (one of the OML integer types or
OML_DOUBLE_VALUE). It outputs a pair of values, namely:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>("avg" : OML_DOUBLE_VALUE,
 "min" : OML_DOUBLE_VALUE,
 "max" : OML_DOUBLE_VALUE)</tt></pre>
</div></div>
<div class="paragraph"><p>where <em>avg</em> is the average over the current sample set, <em>min</em> is the
minimum value of the current sample set, and <em>max</em> is the maximum
value of the current sample set.</p></div>
<div class="paragraph"><p>To use this filter, use <em>operation="avg"</em> in the <em>filter</em> element.</p></div>
</div>
<div class="sect2">
<h3 id="_standard_deviation_filter_stddev">Standard Deviation Filter (stddev)</h3>
<div class="paragraph"><p>This filter computes the standard deviation and variance of its inputs
samples. It accepts numeric inputs only (one of the OML integer types
or OML_DOUBLE_VALUE). It outputs a pair of values, namely:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>("stddev"   : OML_DOUBLE_VALUE,
 "variance" : OML_DOUBLE_VALUE)</tt></pre>
</div></div>
<div class="paragraph"><p>where <em>stddev</em> is the standard deviation over the current sample set
and <em>variance</em> is the variance (i.e. the square of <em>stddev</em>).</p></div>
<div class="paragraph"><p>To use this filter, put <em>operation="stddev"</em> in the <em>filter</em> element.</p></div>
</div>
<div class="sect2">
<h3 id="_sum_filter_sum">Sum Filter (sum)</h3>
<div class="paragraph"><p>This filter computes the sum of its input samples. It accepts
numeric inputs only (one of the OML integer types or
OML_DOUBLE_VALUE). It outputs a single value, namely:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>("sum" : OML_DOUBLE_VALUE)</tt></pre>
</div></div>
<div class="paragraph"><p>where <em>sum</em> is the sum all the sample values in the current sample
set.</p></div>
<div class="paragraph"><p>To use this filter, use <em>operation="sum"</em> in the <em>filter</em> element.</p></div>
</div>
<div class="sect2">
<h3 id="_delta_filter_delta">Delta Filter (delta)</h3>
<div class="paragraph"><p>This filter computes the change in its input value between the end of
the previous sample set and the start of the current one.  If the
value at the end of the previous sample set was <em>last</em> and the value
at the end of the current sample set was <em>current</em>, then the filter
computes <em>delta=current-last</em>. It accepts numeric inputs only (one
of the OML integer types or OML_DOUBLE_VALUE). It outputs a pair of
values, namely:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>("delta" : OML_DOUBLE_VALUE,
 "last   : OML_DOUBLE_VALUE)</tt></pre>
</div></div>
<div class="paragraph"><p>where <em>delta</em> is the change in the input over the current sample set
and <em>last</em> is the value that the input had at the end of the current
sample set.</p></div>
<div class="paragraph"><p>The value of <em>delta</em> in the first sample set is computed as
<em>current-first</em>, where <em>first</em> is the first value in the sample set
and <em>current</em> is the final value.</p></div>
<div class="paragraph"><p>To use this filter, use <em>operation="delta"</em> in the <em>filter</em> element.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notes">NOTES</h2>
<div class="sectionbody">
<div class="paragraph"><p>Prior to OML 2.6, the configuration file format was identical in
structure but used a different set of names for the XML attributes and
elements.  These old names were very confusing, so they have been
replaced names that better reflect the underlying concepts.  The old
names are still supported so old configuration files and tools will
not break.  Here is a summary of the old names and how they relate to
the new ones:</p></div>
<div class="tableblock">
<table rules="all"
width="90%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="66%" />
<col width="33%" />
<tbody>
<tr>
<td align="center" valign="top"><p class="table">OLD</p></td>
<td align="center" valign="top"><p class="table">NEW</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;omlc exp_id="abc" &#8230;&gt;</p></td>
<td align="left" valign="top"><p class="table">&lt;omlc domain="abc" &#8230; &gt;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;mp name="def" rename="bar"&#8230;&gt;</p></td>
<td align="left" valign="top"><p class="table">&lt;stream mp="def" name="bar"&#8230;&gt;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;f fname="avg" &#8230;&gt;</p></td>
<td align="left" valign="top"><p class="table">&lt;filter operation="avg" &#8230;&gt;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;f pname="foo" &#8230;&gt;</p></td>
<td align="left" valign="top"><p class="table">&lt;filter field="foo" &#8230;&gt;</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">&lt;f sname="bar" &#8230;&gt;</p></td>
<td align="left" valign="top"><p class="table">&lt;filter rename="bar" &#8230;&gt;</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bugs">BUGS</h2>
<div class="sectionbody">
<div class="paragraph"><p>The selection of the <em>first</em> filter when <em>samples=1</em> is used can
be confusing for numeric MP fields because it results in a different
schema in the measurement output compared to other possible
configurations available from the command line, which use the <em>avg</em>
filter.  It is not clear whether this is a feature or a bug.</p></div>
<div class="paragraph"><p>If a problem you are experiencing is not addressed in the FAQ
(<a href="http://oml.mytestbed.net/projects/oml/wiki/FAQ_and_Support">http://oml.mytestbed.net/projects/oml/wiki/FAQ_and_Support</a>) nor already
present in the list of know bugs
(<a href="http://oml.mytestbed.net/projects/oml/issues">http://oml.mytestbed.net/projects/oml/issues</a>). You could discuss it on
the mailing list (details and archives at
<a href="http://oml.mytestbed.net/tab/show?id=oml">http://oml.mytestbed.net/tab/show?id=oml</a>).</p></div>
<div class="paragraph"><p>It is however advisable to open a ticket on our issue tracker at
<a href="http://oml.mytestbed.net/projects/oml/issues/new">http://oml.mytestbed.net/projects/oml/issues/new</a>. Don&#8217;t forget to
include details such as client and server logs (at <em>[--oml-log-level|-d]
2</em>). It also helps if you can share the source code of a (minimal, if
possible) example reliably triggering the problem.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_security_considerations">SECURITY CONSIDERATIONS</h2>
<div class="sectionbody">
<div class="paragraph"><p><em>oml2-server</em> does not use any authentication, and should thus be
considered insecure.  It is intended to be deployed behind firewalls
on a dedicated testbed network.  It should not be run as a daemon on
an open network.  Future versions of OML may be re-designed to be
suitable for use in insecure environments.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_manual_pages">Manual Pages</h3>
<div class="paragraph"><p><a href="oml2-server.1.html">oml2-server(1)</a>, <a href="liboml2.1.html">liboml2(1)</a>, <a href="liboml2.3.html">liboml2(3)</a>, <a href="omlc_add_mp.3.html">omlc_add_mp(3)</a></p></div>
</div>
<div class="sect2">
<h3 id="_oml_user_manual">OML User Manual</h3>
<div class="paragraph"><p><a href="http://oml.mytestbed.net/projects/oml/wiki/Documentation">http://oml.mytestbed.net/projects/oml/wiki/Documentation</a></p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
OML 2.12.0pre.79-58cf-dirty<br />
Last updated 2015-04-16 15:28:58 CEST
</div>
<div id="footer-badges">
<a href="http://validator.w3.org/check?uri=referer">
  <img style="border:0;width:88px;height:31px"
    src="http://www.w3.org/Icons/valid-xhtml11-blue"
    alt="Valid XHTML 1.1" height="31" width="88" />
</a>
<a href="http://jigsaw.w3.org/css-validator/">
  <img style="border:0;width:88px;height:31px"
    src="http://jigsaw.w3.org/css-validator/images/vcss-blue"
    alt="Valid CSS!" />
</a>
</div>
</div>
</body>
</html>
